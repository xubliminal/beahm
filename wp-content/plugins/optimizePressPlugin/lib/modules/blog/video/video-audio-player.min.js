opjq(document).ready(function(){var a=opjq,b=function(a,c){var d,e,f,g,h={clip:{autoPlay:!1,autoBuffering:!1,scaling:"fit"},plugins:{}},i=a.html(),j=a.find(".flowplayer"),k=j,c=c||1;return 0!==j.length||a.hasClass("audio-plugin")?((k.hasClass("auto-play")||c>1)&&(h.clip.autoPlay=!0),k.hasClass("hide-controls")&&(h.plugins.controls=null),(k.hasClass("auto-buffer")||c>1)&&(h.clip.autoBuffering=!0),k.find("img").attr("src")&&(h.clip.poster=!0,f=k.find("img").attr("src")),e=k.attr("href")?k.attr("href").substr(k.attr("href").lastIndexOf(".")+1):"",tempExt1=k.attr("data-href1")?k.attr("data-href1").substr(k.attr("data-href1").lastIndexOf(".")+1):"",tempExt2=k.attr("data-href2")?k.attr("data-href2").substr(k.attr("data-href2").lastIndexOf(".")+1):"",e=e.toLowerCase(),tempExt1=tempExt1.toLowerCase(),tempExt2=tempExt2.toLowerCase(),d=k.attr("href"),setMediaProps={},setMediaProps[e]=k.attr("href"),k.hasClass("audio-player")?(e="m4a"===e?"mp4":e,tempExt1="m4a"===tempExt1?"mp4":tempExt1,tempExt2="m4a"===tempExt2?"mp4":tempExt2,e="mp3"===e?"mpeg":e,tempExt1="mp3"===tempExt1?"mpeg":tempExt1,tempExt2="mp3"===tempExt2?"mpeg":tempExt2,k.removeClass("flowplayer"),k.append("<audio "+(h.clip.autoBuffering?'autobuffer="auto" ':"")+(h.plugins.controls?" controls":"")+'><source src="'+k.attr("href")+'" type="audio/'+e+'" style="width:100%; height: 100%;"><source src="'+k.attr("data-href1")+'" type="audio/'+tempExt1+'" style="width:100%; height: 100%;"><source src="'+k.attr("data-href2")+'" type="audio/'+tempExt2+'" style="width:100%; height: 100%;"></audio>'),k.find("audio").mediaelementplayer({alwaysShowControls:!0,enableAutosize:!0,videoWidth:-1,videoHeight:-1,audioWidth:"100%",audioHeight:30,enablePluginDebug:!1,plugins:["flash"],pluginPath:OP.mediaelementplayer,flashName:"flashmediaelement.swf"}),h.clip.autoPlay&&k.find("audio").attr("autoplay","autoplay")):(h.clip.poster&&k.find("img").remove(),e="m4v"===e?"mp4":e,tempExt1="m4v"===tempExt1?"mp4":tempExt1,tempExt2="m4v"===tempExt2?"mp4":tempExt2,g="<video "+(h.clip.autoBuffering?"":'preload="none" ')+(h.plugins.controls?" controls":"")+(h.clip.poster?' poster="'+f+'"':"")+'><source src="'+k.attr("href")+'" type="video/'+e+'">'+(k.attr("data-href1")?'<source src="'+k.attr("data-href1")+'" type="video/'+tempExt1+'">':"")+(k.attr("data-href2")?'<source src="'+k.attr("data-href2")+'" type="video/'+tempExt2+'">':"")+"</video>",k.append(g),h.clip.autoPlay&&k.find("video").attr("autoplay","autoplay"),k.flowplayer({adaptiveRatio:!0,swf:OP.flowplayerHTML5,key:OP.flowplayerKey,logo:OP.flowplayerLogo}),k.bind("error",function(){var e;return c>4?(e=k.find(".fp-message h2"),e.text("Unable to load video"),k.find(".fp-message p").html('<a target="_blank" download="'+d+'" href="'+d+'">Download</a>'),void 0):(c+=1,k.unbind(),k.unload(),k.remove(),a.append(i),b(a,c),void 0)})),k.removeAttr("href"),void 0):(a.addClass("not-flowplayer"),void 0)};a(".video-plugin, .video-plugin-new, .audio-plugin").each(function(){b(a(this))})});