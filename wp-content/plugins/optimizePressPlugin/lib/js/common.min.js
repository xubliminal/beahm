!function(a){function b(){a("a.op-help-vid").each(function(){var b=a(this).next(),c=parseInt(b.find(".help_vid_width").val(),10),d=parseInt(b.find(".help_vid_height").val(),10);a(this).fancybox({width:c,height:d})})}function c(){var b=900,c=10;"undefined"!=typeof op_footer_prefs&&(b=op_footer_prefs.full_width||b,c=op_footer_prefs.column_margin||c),a(".img-radio-selector.footer-columns :radio").change(function(){var d=a(this),e=d.val(),f=d.closest(".op-bsw-grey-panel-content").find(".column-container");if(d.is(":checked"))if(e>1){var g=Math.floor(b-(e-1)*c),h=Math.floor(g/e);f.show(),f=f.find(".column-editor").find("div").hide().end(),e++;for(var i=1;e>i;i++){var j=f.find("div.width-"+i).show().find(":input"),k=j.val();(""==k||v)&&j.val(h)}}else f.css("display","none")})}function d(){var b=a(".font-selector");if(b.length>0){var c,d,e='<ul><li><a href="#">Theme Default</a></li></ul>';b.filter(":first").find("optgroup").each(function(){e+="<p>"+a(this).attr("label")+"</p><ul>",a(this).find("option").each(function(){d=a(this).val(),c=d.replace(/\s+/g,"-").toLowerCase()+".jpg",e+='<li><a href="#"><img src="'+OptimizePress.imgurl+"fonts/"+c+'" alt="'+d+'" /></a></li>'}),e+="</ul>"}),e='<div class="select-font"><a href="#" class="selected-font">Theme Default</a><div class="font-dropdown">'+e+"</div></div>",a("body").on("click",".selected-font",function(b){a(this).closest(".select-font").find(".font-dropdown").toggle(),b.preventDefault()}),a("body").on("click",".select-font li a",function(b){var c=a(this),d=c.find("img"),e="";d.length>0&&(e=d.attr("alt")),c.closest(".select-font").find(".font-dropdown").hide().end().siblings(".font-selector").val(e).end().find(".selected-font").html(c.html()),b.preventDefault()}),b.each(function(){a(this).hide().after(e).siblings(".select-font").find('li a img[alt="'+a(this).val()+'"]').parent().trigger("click")}).change(function(){var b=a(this),c=b.val(),d=b.siblings(".select-font");d=""==c?d.find("li a:first"):d.find('li a img[alt="'+c+'"]'),d.trigger("click")})}a("body").on("click",'a[href$="#reset"]',function(b){a(this).parent().find(":input").val("").trigger("change").end().find(".op-asset-dropdown-list a:first").trigger("click"),b.preventDefault()})}function e(){a("select.style-selector").next().find("a.selected-item").click(function(b){a(this).next().toggle(),b.preventDefault()}).next().find("li a").click(function(b){var c=a(this);b.preventDefault(),x=!0;var d=a(this).closest(".op-asset-dropdown").find("li.selected").removeClass("selected").end().find("a.selected-item").html(c.html()).next().hide().end().end().prev().val(c.find("img").attr("alt"));c.parent().addClass("selected"),v&&d.trigger("change"),x=!1}).end().end().end().end().change(function(){x===!1&&a(this).next().find('li img[alt="'+a(this).val()+'"]').trigger("click")}).trigger("change")}function f(){a(".slider-item").each(function(b,c){var d=a(c).closest(".submit-button-container").attr("id");a(c).slider({disabled:"true"==a(c).attr("data-disabled")?!0:!1,min:parseInt(a(c).attr("data-min")),max:parseInt(a(c).attr("data-max")),value:parseInt(a(c).attr("data-value")),stop:function(b,c){var e;e="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id,a.event.trigger({type:"update_button_preview",value:c.value,id:e,owner:d,element_type:"slider",element:c})},slide:function(b,c){var e;e="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id;var f=a("#"+d+" #output_"+e);f.length>0&&f.html(c.value+f.attr("data-unit")),a("#"+d+" #input_"+e).val(c.value)}})})}function g(){0==a("#op-color-picker-1").length&&a("body").append('<div id="op-color-picker-1" />');var b=a("#op-color-picker-1"),c=a;t=a.farbtastic("#op-color-picker-1",h),a(".color-picker-container :input").focus(function(){c=a(this),a(this).data("cp_link").trigger("click")}).blur(function(){b.hide()}).change(function(){var d=a(this),e=i(d.val());d||(d=c),d.data("cp_link").css("background-color","#"==e?"transparent":e),e="#"===e?"":e,u&&u[1]&&a(u[1]).is(":visible")&&h(e),b.is(":visible")&&"#"!=e&&t.setColor(e)}).each(function(){var b=a(this).siblings("a.pick-color");b.data("input",a(this)),a(this).data("cp_link",b).data("cp_link").css("background-color",i(a(this).val()))}),a("a.pick-color").click(function(c){u=[a(this),a(this).data("input")],h(u[1].val()),b.position({of:u[0],my:"left top",at:"left bottom"}).show(),c.preventDefault()})}function h(b){t.setColor(b),u[1].val(b),u[0].css("background-color",b),a.event.trigger({type:"update_button_preview",id:u[1].attr("id"),owner:u[1].closest(".submit-button-container").attr("id"),value:b})}function i(a){return"#"+a.replace(/[^a-fA-F0-9]/,"")}function j(){"undefined"!=typeof op_color_schemes&&a('.section-color_scheme .color-schemes .img-radio-item input[type="radio"]').change(function(){var b=op_color_schemes[a(this).val()].colors||{};a.each(b,function(b,c){var d=a("#op_sections_color_scheme_field_"+b);(""!=d.val()&&v||""==d.val())&&d.val(c).trigger("change")})}).filter(":checked").trigger("change")}function k(){var b=a(".column-layout .column-container"),c=a(".column-layout .column-editor");a(".column-layout :radio").change(function(){var d={},e=a(this).val();if("undefined"!=typeof op_column_widths.widths[e]){b.show(),d=op_column_widths.widths[e],c.find("div").hide();var f,g,h,i=null;a.each(d,function(a,b){f=c.find("div.width-"+a),0==f.length&&(null!==i?g.after(l(a,b.title)):c.prepend(l(a,b.title))),i=a,f=c.find("div.width-"+a),g=f,f.show(),h=f.find(":input"),(""==h.val()||v)&&h.val(b.width)})}else b.hide()}).filter(":checked").trigger("change")}function l(a,b){var c="op_sections_column_layout_widths_"+a;return'<p class="width-'+a+'"><label for="'+c+'">'+b+'</label><input type="text" name="op[sections][column_layout][widths]['+a+']" id="'+c+'" /></p>'}function m(){a(".op-bsw-blog-enabler").iButton({change:function(b){var c=b.closest("p").find(".op-bsw-waiting");c.fadeIn("fast"),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-enable-blog",enabled:b.is(":checked")?"Y":"N",_wpnonce:a("#_wpnonce").val()},function(a){c.fadeOut("fast"),"undefined"!=typeof a.error&&alert(a.errror)},"json")}})}function n(){a("body").on("click",'.op-multirow .file-preview a[href$="#remove"]',function(b){var c=a(this),d=c.parent(),e=d.find(".op-removefile");0==e.length&&(e=c.closest(".op-type").find(".op-removefile")),e.val("Y"),d.hide(),b.preventDefault()}),a("body").on("click",".op-multirow .add-new-row",function(b){var c=a(this).closest(".op-multirow"),d=c.find(".op-multirow-list"),e=d.find("> li"),f=c.find(".op-max-entries"),g=!1;f.length>0&&e.length<f.val()&&(g=!0),0==f.length&&(g=!0),g&&(e.filter(":first").clone().find(".op-multirow-remove").remove().end().find(":input").val("").end().appendTo(d).find(".op-type-switcher").trigger("change"),d.find('> li:last .file-preview a[href$="#remove"]').trigger("click")),b.preventDefault()}),a("body").on("click",".op-multirow .op-multirow-controls a",function(b){var c=a(this).attr("href").split("#")[1],d=a(this).closest(".op-multirow-list").find("> li"),e=a(this).closest(".op-multirow-list > li"),f=d.index(e);switch(c){case"move-up":f>0&&r(e,"prev");break;case"move-down":f<d.length-1&&r(e,"next");break;case"remove":d.length>1?e.remove():e.find(":input").val("").trigger("change").end().find(".op-multirow-remove").remove()}b.preventDefault()})}function o(){a("ul.op-bsw-grey-panel-tabs").op_tabs()}function p(){a("body").on("change",'.img-radio-selector input[type="radio"]',function(){"alongside"===a(this).val()?(a(".op-header-layout-alongside").show(),a(".op-header-layout-below").hide()):"below"===a(this).val()&&(a(".op-header-layout-alongside").hide(),a(".op-header-layout-below").show()),a(this).closest(".img-radio-selector").parent().find(".img-radio-selected").removeClass("img-radio-selected"),a(this).closest(".img-radio-item").addClass("img-radio-selected")}),a("body").on("click",".img-radio-label",function(){a(this).closest(".img-radio-item").find(":radio").attr("checked",!0).trigger("change")}),a(".img-radio-selector.menu-position .img-radio-selected .img-radio-label").trigger("click")}function q(){a(".panel-controlx:not(.op-bsw-blog-enabler):not(.op-disable-ibutton-load)").iButton({change:function(a){var b=a.closest(".op-bsw-grey-panel"),c=b.find(".op-bsw-grey-panel-content:first"),d=b.find(".show-hide-panel a:first"),e=c.is(":visible"),f=a.is(":checked");!e&&f===!0&&d.trigger("click"),e&&f===!1&&d.trigger("click")}}),a("body").on("click",".op-bsw-grey-panel-header h3 a",function(b){b.preventDefault(),a(this).closest("div").find(".show-hide-panel a").trigger("click")}),a("body").on("click",".show-hide-panel a",function(b){b.preventDefault();var c=a(this),d="addClass",e="show",f=c.closest(".op-bsw-grey-panel"),g=f.find(".op-bsw-grey-panel-content:first");g.is(":visible")&&(d="removeClass",e="hide"),c[d]("op-bsw-visible"),g[e](),"show"==e&&f.find(".op-type-switcher").trigger("change"),f.find(".op-bsw-grey-panel-hide")[e]()}),a(".op-bsw-grey-panel.has-error .show-hide-panel a").trigger("click")}function r(b,c){var d=b.clone(!0);d.find(":input").each(function(c){a(this).val(b.find(":input:eq("+c+")").val())}),b[c]()["next"==c?"after":"before"](d),b.remove()}function s(){a("body").on("click",".op-file-uploader a.button",function(b){b.preventDefault(),w=[a(this).next()];var c=w[0].parent();w.push(c.find(".file-preview")),w.push(c.find(".op-uploader-path"))}),a("body").on("click",".op-file-uploader a.remove-file",function(b){b.preventDefault(),a(this).closest(".content").html("").parent().prev().val(""),a.isFunction(a.fancybox.update)&&a.fancybox.update()})}var t,u,v=!1,w=null,x=!1;a(document).ready(function(){a("body").on("change",".op-type-switcher:visible",function(){a(this).closest(".op-type-switcher-container").find(".op-type:first").hide().siblings(".op-type").hide().end().end().find(".op-type-"+a(this).val()).show().find(".op-bsw-grey-panel-content:not(:visible)").show().end().find(".op-type-switcher:visible").trigger("change")}).trigger("change"),a("body").on("click",".op-notify",function(b){var c,d,e=a(b.target),f=2;e.is("a")||(a(this).fadeThenSlideToggle(),e.hasClass("op-notify-close")&&a(this).hasClass("js-remember-choice")&&(c=new Date,c.setTime(c.getTime()+24*f*60*60*1e3),d="; expires="+c.toGMTString(),document.cookie=a(this).attr("id")+"=notification_hidden"+d+"; path=/"),b.preventDefault())}),a(".default-val-link").click(function(b){var c=a(this).attr("href").split("#")[1];a("#"+c).val(a("#"+c+"_default").val()),b.preventDefault()}),a(document).mousedown(function(b){a("#op-color-picker-1").hide().css({top:"auto",left:"auto"}),0==a(b.target).closest(".select-font").length&&a(".font-dropdown").hide(),0==a(b.target).closest(".op-asset-dropdown-list").length&&a(".op-asset-dropdown-list:not(.op-disable-selected .op-asset-dropdown-list)").hide()}),a(".img-radio-selector.menu-position :radio").change(function(){var b=a(this),c="hide",d=b.closest(".op-bsw-grey-panel-content");"undefined"!=typeof op_menu_link_colors&&"undefined"!=typeof op_menu_link_colors[b.val()]&&(c="show"),d.find(".layout-settings").hide(),d.find("#layout-settings-"+b.val()).show()}),a("a.fancybox").fancybox({beforeShow:function(){a("html").css({overflow:"hidden",height:"100%"}),a(window.parent.document).find(".fancybox-close").css({display:"none"})},afterClose:function(){a("html").css({overflow:"auto",height:"auto"}),a(window.parent.document).find(".fancybox-close").css({display:"block"})}}),c(),q(),p(),j(),o(),n(),m(),k(),g(),f(),d(),s(),e(),b(),a("form.op-bsw-settings,div.op-bsw-wizard").length>0&&a("textarea.wp-editor-area").each(function(){a(this).val(op_wpautop(a(this).val())),tinyMCE.execCommand("mceAddControl",!0,a(this).attr("id"))}),v=!0,a(".op-js-item-layout-delete").click(function(){var b=a(this);return a.ajax({type:"POST",url:OptimizePress.ajaxurl,data:{action:OptimizePress.SN+"-content-layout-delete",layout:b.attr("data-id"),nonce:b.attr("data-nonce")},success:function(a){"boolean"==typeof a.success&&a.success===!0?b.parent().remove():alert("Error occured!")},dataType:"json"}),!1})}),a.fn.fadeThenSlideToggle=function(a,b,c){return this.is(":hidden")?this.slideDown(a,b).fadeTo(a,1,b,c):this.fadeTo(a,0,b).slideUp(a,b,c)},window.op_attach_file=function(){if(null!==w){tb_remove();var b=w[1].find(".content").html(""),c=w[1].find(".op-show-waiting").fadeIn("fast"),d={action:OptimizePress.SN+"-file-attachment",attach_type:arguments[0]};"url"==arguments[0]?d.media_url=arguments[1]:(d.media_item=arguments[1],d.media_size=arguments[2]),a.post(OptimizePress.ajaxurl,d,function(d){c.fadeOut("fast",function(){w[2].length>0&&w[2].val(d.file),w[0].val(d.url).trigger("change");var c=a(d.html),e=c.find("img");e.length>0&&e.load(function(){a(window).trigger("resize")}),b.html(c).fadeIn("fast")})},"json")}},window.op_wpautop=function(a){var b="table|thead|tfoot|tbody|tr|td|th|caption|col|colgroup|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|p|h[1-6]|fieldset|legend|hr|noscript|menu|samp|header|footer|article|section|hgroup|nav|aside|details|summary";return a?(a=a.replace(/(\r\n|\n)([\&nbsp\;|\s])(\r\n|\n)/g,"<p>&nbsp;</p>"),-1!=a.indexOf("<object")&&(a=a.replace(/<object[\s\S]+?<\/object>/g,function(a){return a.replace(/[\r\n]+/g,"")})),a=a.replace(/<[^<>]+>/g,function(a){return a.replace(/[\r\n]+/g," ")}),(-1!=a.indexOf("<pre")||-1!=a.indexOf("<script"))&&(a=a.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(a){return a.replace(/(\r\n|\n)/g,"<wp_temp_br>")})),a+="\n\n",a=a.replace(/<br \/>\s*<br \/>/gi,"\n\n"),a=a.replace(new RegExp("(<(?:"+b+")(?: [^>]*)?>)","gi"),"\n$1"),a=a.replace(new RegExp("(</(?:"+b+")>)","gi"),"$1\n\n"),a=a.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),a=a.replace(/\r\n|\r/g,"\n"),a=a.replace(/\n\s*\n+/g,"\n\n"),a=a.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),a=a.replace(/<p>\s*?<\/p>/gi,""),a=a.replace(new RegExp("<p>\\s*(</?(?:"+b+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/<p>(<li.+?)<\/p>/gi,"$1"),a=a.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),a=a.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),a=a.replace(new RegExp("<p>\\s*(</?(?:"+b+")(?: [^>]*)?>)","gi"),"$1"),a=a.replace(new RegExp("(</?(?:"+b+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/\s*\n/gi,"<br />\n"),a=a.replace(new RegExp("(</?(?:"+b+")[^>]*>)\\s*<br />","gi"),"$1"),a=a.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),a=a.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),a=a.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(a,b,c){return c.match(/<p( [^>]*)?>/)?a:b+"<p>"+c+"</p>"}),a=a.replace(/<wp_temp_br>/g,"\n")):""},window.op_unautop=function(a){var b,c;return(-1!=a.indexOf("<pre")||-1!=a.indexOf("<script"))&&(a=a.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(a){return a=a.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp_temp>"),a.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp_temp>")})),a=a.replace(/<p>\s*<\/p>/g,"<op_temp>"),a=a.replace(/<p>\s*<br ?\/?>/g,"<op_temp>"),b="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|div|h[1-6]|p|fieldset",a=a.replace(new RegExp("\\s*</("+b+")>\\s*","g"),"</$1>\n"),a=a.replace(new RegExp("\\s*<((?:"+b+")(?: [^>]*)?)>","g"),"\n<$1>"),a=a.replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>"),a=a.replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n"),a=a.replace(/\s*<p>/gi,""),a=a.replace(/\s*<\/p>\s*/gi,"\n\n"),a=a.replace(/\n[\s\u00a0]+\n/g,"\n\n"),a=a.replace(/\s*<br ?\/?>\s*/gi,"\n"),a=a.replace(/\s*<div/g,"\n<div"),a=a.replace(/<\/div>\s*/g,"</div>\n"),a=a.replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n"),a=a.replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption"),c="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|h[1-6]|pre|fieldset",a=a.replace(new RegExp("\\s*<((?:"+c+")(?: [^>]*)?)\\s*>","g"),"\n<$1>"),a=a.replace(new RegExp("\\s*</("+c+")>\\s*","g"),"</$1>\n"),a=a.replace(/<li([^>]*)>/g,"	<li$1>"),-1!=a.indexOf("<hr")&&(a=a.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!=a.indexOf("<object")&&(a=a.replace(/<object[\s\S]+?<\/object>/g,function(a){return a.replace(/[\r\n]+/g,"")})),a=a.replace(/<\/p#>/g,"</p>\n"),a=a.replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1"),a=a.replace(/^\s+/,""),a=a.replace(/[\s\u00a0]+$/,""),a=a.replace(/<wp_temp>/g,"\n"),a=a.replace(/<op_temp>/g,"<p>&nbsp;</p>")},a.fn.op_tabs=function(){return this.each(function(){var b="op-bsw-grey-panel-tabs-selected",c=a(this).find("li").find("a").click(function(c){var d=a(this).attr("href").split("#")[1];a(this).parent().parent().find("."+b).removeClass(b).end().end().addClass(b).closest(".op-bsw-grey-panel-content").find("> .op-bsw-grey-panel-tab-content-container").find("> .op-bsw-grey-panel-tab-content:visible").hide().end().find("> .tab-"+d).show().find(".op-type-switcher").trigger("change"),c.preventDefault()}).end(),d=c.filter(".has-error").length>0?c.filter(".has-error:first"):c.filter(":first");d.find("a:first").trigger("click")})},window.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},window.generateCssColor=function(a,b){return 100!=b?(a=hexToRgb(a),a?"rgba("+a.r+", "+a.g+", "+a.b+", "+parseFloat(b/100)+")":a):a}}(opjq);