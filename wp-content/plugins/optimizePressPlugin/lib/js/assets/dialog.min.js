!function(a){function b(){hb.is(":visible")&&hb.animate({bottom:-490},{duration:400,complete:function(){a(this).hide(),ib.hasClass("help-video")&&ib.html("")}})}function c(a){for(var b,c=a.find("span.content span.title").text(),d=2;5>d;d++)b=M("slide_"+d+"_title").replace(/%element_name%/,c),lb[d].find("div.asset-title:first span.title-text").text(b)}function d(){var b=a(".fancybox-inner").height();a.each(lb,function(){this.height(b)})}function e(b,c){if(c=c||function(){},"Y"==op_assets[b[0]][b[1]].settings)if("undefined"==typeof mb[b[0]]&&(mb[b[0]]={},nb[b[0]]={}),"undefined"==typeof mb[b[0]][b[1]]){var d=OptimizePress[b[0]+"_assets_url"];"core"!=b[0]&&(d+=b[1]+"/"),a.getScript(d+b[1]+".js",function(){l(b[0],b[1],op_asset_settings),a.object_length(vb)>0?(a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-assets-folder-list",folders:vb},function(d){for(var e in d)for(var f in d[e]){var g=d[e][f];if("image"==e||"style"==e){var h=a("#"+f+"_container"),i=h.closest(".op_asset_browser_slide").attr("id");h.find(".op-asset-dropdown-list").append(g),("op_asset_browser_slide3"==i||"op_asset_browser_slide4"==i)&&P(f+"_container")}else"checkbox"==e&&a(".field-id-"+f+" .checkbox-container").append(g);xb[f]=g}k(b[0],b[1]),c(nb[b[0]][b[1]],mb[b[0]][b[1]]),a("#op_asset_browser_container").find(".op-asset-dropdown-list-item:not(.op-asset-dropdown-list-item--loaded)").find("img").on("load",function(){a(this).parent().addClass("op-asset-img-loaded").parent().addClass("op-asset-dropdown-list-item--loaded"),a(this).off()})},"json"),vb={}):(k(b[0],b[1]),c(nb[b[0]][b[1]],mb[b[0]][b[1]]))})}else"undefined"!=typeof nb[b[0]][b[1]]&&a.each(nb[b[0]][b[1]],function(){this.find(".wp-editor-area").each(function(){var b=a(this).attr("id");a(this).val(op_wpautop(a(this).val())),tinyMCE.execCommand("mceAddControl",!0,b)})}),k(b[0],b[1]),c(nb[b[0]][b[1]],mb[b[0]][b[1]]);else qb?(pb=!1,qb=!1,g(1)):(G("["+b[1]+"]"),a.fancybox.close())}function f(a,b,c){var d='<div class="op-insert-buttons cf">';"boolean"!=typeof b?("undefined"!=typeof b.prev&&(d+='<a href="#'+(c+1)+'" class="op-slide-link">'+M(b.prev)+"</a>"),"undefined"!=typeof b.next&&(d+='<a href="#'+(c+2)+'" class="op-slide-link">'+M(b.next)+"</a>"),("undefined"==typeof b.insert||"boolean"!=typeof b.insert||b.insert!==!1)&&(d+='<a href="#" class="op-bsw-green-button">'+M("Insert")+"</a>")):b===!0&&(d+='<a href="#" class="op-bsw-green-button">'+M("Insert")+"</a>"),d+='</div><div class="clear"></div>',a.append(d)}function g(b,c){var d,e=0,f=0;if(!pb){for(c=c===!1?!1:!0,f=0;b>f;f++)e+=kb[f].outerWidth(!0);d=a(".fancybox-opened").eq(-1),d.find(".op_asset_browser_slide_active").removeClass("op_asset_browser_slide_active"),c?cb.animate({"margin-left":-e+"px"},"slow",function(){d.find(".op_asset_browser_slide").eq(b).addClass("op_asset_browser_slide_active").find(".op_asset_content").addClass("op_no_outline").attr("tabindex",0).focus(),1===j()&&h()}):(cb.css({"margin-left":-e+"px"}),d.find(".op_asset_browser_slide").eq(b).addClass("op_asset_browser_slide_active").find(".op_asset_content").addClass("op_no_outline").attr("tabindex",0).focus(),1===j()&&h())}}function h(){var b,c=j();1===c&&(b=a("#op_asset_browser_slide1").find(".op-last-selected-asset-list-item"),b.length>0?b.focus():a("#op_assets_filter").focus()),2===c&&(b=a("#op_asset_browser_slide2").find(".op-last-selected-asset-dropdown-list-item:visible"),a("#op_asset_browser_slide2").find(".op-last-selected-asset-dropdown-list-item:hidden").removeClass("op-last-selected-asset-dropdown-list-item"),b.length>0?b.removeClass("selected").focus():a(".op-asset-dropdown-list-item:visible").eq(0).find("a").focus())}function j(){var b;return a("#op_asset_browser_slider").find("> li").each(function(c){a(this).hasClass("op_asset_browser_slide_active")&&(b=c)}),b}function k(a,b){Z(a,b),Ab=[a,b],m(a,b),bb.find(".op_asset_browser_slide .op-settings-"+a+"-"+b).css("display","block")}function l(b,c,d){nb[b][c]=[],mb[b][c]=d,ob[b][c]=[];var e="op-settings-"+b+"-"+c,g="op_assets_"+b+"_"+c+"_",h=d.insert_steps||{},i=d.help_vids||{};if(0==kb[2].find("> ."+e).length){Bb={};for(var j=1;4>j;j++){var k="";if("undefined"!=typeof i["step_"+j]&&(k=$(i["step_"+j])),ob[b][c].push(k),"undefined"==typeof d.attributes["step_"+j])break;var l=a('<div class="'+e+' settings-container"><div class="op-asset-actual-content" />');nb[b][c].push(l),lb[j+1].append(l);var m=l.find(".op-asset-actual-content");for(var n in d.attributes["step_"+j])p.apply(m,[g,n,d.attributes["step_"+j][n],b,c]);J(l),"undefined"!=typeof h[j]&&f(l,h[j],j)}"undefined"!=typeof d.onGenerateComplete&&d.onGenerateComplete(nb[b][c]),a.each(Bb,function(b,c){var d=a(b);a.each(c,function(a,b){d.trigger(b)})}),bb.find("."+e).on("click",".op-insert-buttons .op-bsw-green-button",function(a){a.preventDefault(),s(b,c)}),z()}}function m(a,b){var c=!1;if(pb||qb||(pb=!0,qb=!0,c=!0),"undefined"!=typeof mb[a][b].attributes){var d="op_assets_"+a+"_"+b+"_",e=".field-id-op_assets_"+a+"_"+b+"_";for(var f in mb[a][b].attributes)for(var g in mb[a][b].attributes[f]){var h=mb[a][b].attributes[f][g];n(d+g,e+g,h)}}c&&(pb=!1,qb=!1)}function n(b,c,d){var e=d.type||"";if("tabs"==e)for(var f in d.tabs)for(var g in d.tabs[f].fields)n(b+"_"+f+"_"+g,c+"_"+f+"_"+g,d.tabs[f].fields[g]);else if("column"==e){b=b.replace("_left_column","").replace("_right_column",""),c=c.replace("_left_column","").replace("_right_column","");for(var f in d.elements)n(b+"_"+f,c+"_"+f,d.elements[f])}else if("container"==e){for(var f in d.attributes)n(b+"_"+f,c+"_"+f,d.attributes[f]);a(c+" .panel-controlx").attr("checked",d.default_value).trigger("change")}else if("slider"==e)$slider=a("#"+b),$slider.slider({value:q(d)}),$slider.slider("option","slide").call($slider,{},{value:q(d),id:b}),$slider.slider("option","stop").call($slider,{},{value:q(d),id:b});else if("text_properties"==e)a("#"+b+"_text").val(d.text_default).trigger("keydown"),a("#"+b+"_size").val(d.size_default).trigger("change"),a("#"+b+"_color").val(d.color_default).trigger("keydown"),a("#"+b+"_container a.selected-item").html(a("#"+b+"_container.op-asset-dropdown-list li:first a").html()),a("#op_asset_browser_slide3 .op-settings-"+Ab[0]+"-"+Ab[1]).trigger({type:"update_button_preview",id:b,value:"Default",font_type:"default",tag:Ab[1]}),a(c+" .op-font-style-bold").attr("checked",d.bold_default).trigger("change"),a(c+" .op-font-style-italic").attr("checked",d.italic_default).trigger("change"),a(c+" .op-font-style-underline").attr("checked",d.underline_default).trigger("change");else if("media"==e)T(b,"");else if("multirow"==e)bb.find(c+"-multirow-container .op-multirow").remove();else if("style-selector"==e||"image-selector"==e)P(b+"_container",q(d));else if("wysiwyg"==e)O(b,q(d));else if("font"==e)bb.find(c+" > a.reset").trigger("click");else if("checkbox"==e){var h=a(".field-id-"+b+" :checkbox").attr("checked",!1).trigger("change"),i=q(d);"object"==typeof i?a.each(i,function(a,b){h.filter('[value="'+b+'"]').attr("checked",!0).trigger("change")}):i===!0&&h.attr("checked",!0).trigger("change")}else if("radio"==e)a(".field-id-"+b+' :radio[value="'+q(d)+'"]').attr("checked",!0);else{var j=a("#"+b).val(q(d)).trigger("change"),i=j.val();if("undefined"!=typeof d.multirow)for(var k=0;i>k;k++)for(var l in d.multirow.attributes)n(b+"_"+k+"_"+l,c+"_"+k+"_"+l,d.multirow.attributes[l])}}function o(a,b,c){var d=this.append('<div class="panel-control"><input type="checkbox" name="op['+a+'][enabled]" id="'+b+'" value="'+c+'" class="panel-controlx"></div>');d.find(".panel-controlx").iButton({change:function(a){var b=a.closest(".op-bsw-grey-panel"),c=b.find(".op-bsw-grey-panel-content:first"),d=b.find(".show-hide-panel a:first"),e=c.is(":visible"),f=a.is(":checked");e||f!==!0?e&&f===!1&&(c.hide(),d.removeClass("op-bsw-visible")):(c.show(),d.addClass("op-bsw-visible"))}})}function p(b,c,d,e,f,g){if("undefined"==typeof d.skip||1!=d.skip){var h,i=d.type||"input",j=d.help||"",k=d.title||"",g=g||"",l="button_preview"==d.type?"":d.addClass||"",m=b+c,n=d.removeCf||!1,r=a('<div class="field-row field-'+i+" field-id-"+m+" "+g+" "+l+" field-"+c+(n?"":" cf")+'" />'),s=this,t=d.prefix||"",x=d.suffix||"";if(t=""==t?"":M(t)+" ",x=""==x?"":" "+M(x),"microcopy"==i)return s.append('<p class="micro-copy'+(""==l?"":" "+l)+'"><img src="'+OptimizePress.imgurl+'70_888.png" alt="Help" /> '+M(d.text)+"</p>"),void 0;if("tabs"==i){var A,F=s.append('<div class="field-id-'+m+'-multirow-container multirow-container field-type-tabs cf" />').find(".field-id-"+m+"-multirow-container"),G=m,H=F.append('<ul class="op-multirow-tabs cf" />').find(".op-multirow-tabs");for(var I in d.tabs){H.append('<li><a href="#'+I+'">'+M(d.tabs[I].title)+"</a></li>"),A=F.append('<div class="op-multirow op-multirow-'+I+'" />').find(".op-multirow-"+I);for(var J in d.tabs[I].fields)p.apply(A,[G+"_"+I+"_",J,d.tabs[I].fields[J],e,f]),a("#"+G+"_"+I+"_"+J).val(q(d.tabs[I].fields[J]))}return H.find("a:first").trigger("click"),void 0}if(r.appendTo(this),a.inArray(i,["h1","h2","h3","h4","h5","h6","p"])>-1)r.append("<"+i+">"+M(k)+"</"+i+">");else if("multirow"==i)r.before('<div class="field-id-'+m+'-multirow-container multirow-container cf" />'),h=s.find(".field-id-"+m+"-multirow-container").append(""==k?"":'<label for="'+m+'">'+M(d.title)+"</label>"),r.append('<a href="#" class="new-row">'+M("add_new")+" "+M(d.link_suffix||"")+"</a>"),h.data("op_current_increment",0);else if("column"===i)for(key in d.elements)p.apply(r,[t,b+key,d.elements[key],e,f]);else if("container"===i){var K=r.append('<div class="op-bsw-grey-panel section-'+m+'"><div class="op-bsw-grey-panel-header cf"><h3><a href="#">'+M(d.title)+'</a></h3></div><div class="op-bsw-grey-panel-content op-bsw-grey-panel-no-sidebar cf" id="op_container_content_'+m+'"></div></div>');K.delegate(".op-bsw-grey-panel-header h3 a","click",function(b){b.preventDefault();var c=a(this),d="addClass",e="show",f=c.closest(".op-bsw-grey-panel"),g=f.find(".op-bsw-grey-panel-content:first");g.is(":visible")&&(d="removeClass",e="hide"),c[d]("op-bsw-visible"),g[e]()}),"undefined"!=typeof d.showPanelControl&&!0===d.showPanelControl&&o.apply(K.find(".op-bsw-grey-panel-header"),[m,"panel_control_"+m,"Y"]);var L=K.find("#op_container_content_"+m);for(key in d.attributes)p.apply(L,[t,m+"_"+key,d.attributes[key],e,f]);K.find('input[type!="text"],select').change(function(){var b,c;"checkbox"===a(this).attr("type")?(b=a(this).attr("name"),c=a(this).is(":checked")?1:0):(b=a(this).attr("id"),c=a(this).val()),a("#op_asset_browser_slide3 .op-settings-"+Ab[0]+"-"+Ab[1]).trigger({type:"update_button_preview",value:c,id:b,element_type:this.tagName.toLowerCase(),tag:Ab[1]})}),K.find('input[type="text"]').on("propertychange keydown input paste",function(){a("#op_asset_browser_slide3 .op-settings-"+Ab[0]+"-"+Ab[1]).trigger({type:"update_button_preview",value:a(this).val(),id:a(this).attr("id"),element_type:this.tagName.toLowerCase(),tag:Ab[1]})})}else switch(r.append(""==k?"":'<label for="'+m+'">'+M(d.title)+"</label>"),"undefined"!=typeof d.helpPosition&&"top"==d.helpPosition&&""!=j&&r.append('<p class="micro-copy"><img src="'+OptimizePress.imgurl+'70_888.png" alt="Help" /> '+M(j)+"</p>"),i){case"custom_html":r.append(d.html);break;case"button_preview":r.append('<div class="preview_border preview-wrapper"><div class="preview-outer"><div class="preview-inner preview_border op-asset-dropdown" id="'+m+'_container"><a href="#" tabindex="-1" class="selected-item css-button style-1 pbox_'+d.addClass+'" id="op_button_preview"><span class="text">'+("undefined"!=typeof d.text?d.text:"Placeholder text")+"</span><span"+("undefined"!=typeof d.showSubtext&&d.showSubtext===!1?' style="display:none !important;"':"")+' class="subtext">'+("undefined"!=typeof d.subtext?d.subtext:"Placeholder subtext")+"</span><div"+("undefined"!=typeof d.showGradient&&d.showGradient===!1?' style="display:none !important;"':"")+'  class="gradient"></div><div'+("undefined"!=typeof d.showShine&&d.showShine===!1?' style="display:none !important;"':"")+'  class="shine"></div><div class="hover"></div><div class="active"></div></a></div></div></div>'),"undefined"!=typeof d.folder&&C("image",{fieldid:m,group:e,tag:f,folder:d.folder},d),a("#op_button_preview").parent().append(D(m,"",d.selectorClass||""));break;case"media":r.append(a("#op_dummy_media_container").html().replace(/op_dummy_media/g,m)),"undefined"!=typeof d.callback&&a("#"+m).change(d.callback);break;case"wysiwyg":u.apply(r,[m]);break;case"slider":var N="";"undefined"!=typeof d.showOutputElement&&d.showOutputElement===!0&&(N='<div class="slider-output"><span id="output_'+m+'" data-unit="'+d.unit+'">'+("undefined"!=typeof d.default_value?d.default_value:0)+d.unit+"</span></div>"),slider=r.append(t+N+'<div class="slider-item" id="'+m+'" data-min="'+("undefined"!=typeof d.min?d.min:0)+'" data-max="'+("undefined"!=typeof d.max?d.max:0)+'" data-value="'+("undefined"!=typeof d.default_value?d.default_value:0)+'" />'+x),slider.find(".slider-item").slider({min:"undefined"!=typeof d.min?d.min:0,max:"undefined"!=typeof d.max?d.max:0,value:"undefined"!=typeof d.default_value?d.default_value:0,stop:function(b,c){var d;d="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id,a("#op_asset_browser_slide3 .op-settings-"+Ab[0]+"-"+Ab[1]).trigger({type:"update_button_preview",value:c.value,id:d,element_type:"slider",tag:Ab[1]})},slide:function(b,c){var d;d="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id;var e=a("#output_"+d);e.length>0&&e.html(c.value+e.attr("data-unit"))}});break;case"color":r.append('<div class="color-picker-container cf">'+t+'<input type="text" value="'+(void 0!=typeof d.default_value?d.default_value:"")+'" id="'+m+'" name="'+m+'" />'+x+'<a href="#" class="op-pick-color hide-if-no-js"></a></div>');break;case"checkbox":var Q=d.func||"prepend";r[Q]('<div class="checkbox-container">'+y(m,d,i,e,f)+"</div>"),"undefined"!=typeof d.appendTo&&r.delegate(":checkbox","change",function(){var c=a(".field-id-"+b+d.appendTo+" :input"),e=c.val(),f=a(this).val();"undefined"==typeof e&&(e=""),a(this).is(":checked")?e+="|"+f:e=e.replace(new RegExp(f,"g"),""),e=e.replace(new RegExp("^[|]+","g"),""),c.val(e)});break;case"radio":r.append('<div class="checkbox-container">'+y(m,d,i,e,f)+"</div>");break;case"image-selector":"undefined"!=typeof d.folder&&C("image",{fieldid:m,group:e,tag:f,folder:d.folder},d),r.append(E(m,"",d.selectorClass||""));break;case"text_properties":r.append(w(m,d)).find(".selected-item").html(r.find("li a:first").html());break;case"font":r.append(v(m,d)).find(".selected-item").html(r.find("li a:first").html());break;case"style-selector":"undefined"!=typeof d.folder&&C("style",{fieldid:m,group:e,tag:f,folder:d.folder},d),r.append(E(m,"",d.selectorClass||""));break;case"select":r.append(t+'<select name="'+m+'" id="'+m+'">'+y(m,d,i,e,f)+"</select>"+x);break;case"membership_select":r.append(t+'<select name="'+m+'" id="'+m+'">'+y(m,d,i,e,f)+"</select>"+x);break;case"textarea":r.append(t+'<textarea cols="30" rows="10" name="'+m+'" id="'+m+'"></textarea>'+x);break;case"hidden":r.append(t+'<input type="hidden" name="'+m+'" id="'+m+'" value="'+(void 0!=typeof d.default_value?d.default_value:"")+'" />'+x);break;case"paragraph":r.append(t+'<p name="'+m+'" id="'+m+'">'+(void 0!=typeof d.text?d.text:"")+"</p>"+x);break;default:r.append(t+'<input type="text" name="'+m+'" id="'+m+'" />'+x)}if("undefined"!=typeof d.helpPosition&&"top"==d.helpPosition||""==j||r.append('<p class="micro-copy"><img src="'+OptimizePress.imgurl+'70_888.png" alt="Help" /> '+M(j)+"</p>"),"undefined"!=typeof d.events)if("image-selector"!=i&&"style-selector"!=i||"undefined"==typeof d.events.change){var R=typeof d.trigger_events,S=a("#"+m);for(var I in d.events)S.bind(I,nb[e][f],d.events[I]);if("undefined"!=R){R="object"!=R?[d.trigger_events]:d.trigger_events,Bb["#"+m]=[];for(var I in R)Bb["#"+m].push(R[I])}}else r.delegate("li a","click",function(b){b.preventDefault(),a(this).closest("ul").find("a.selected").removeClass("selected").end().end().addClass("selected");var c=d.events.change(a(this).find("img").attr("alt"),nb[e][f]);c===!1&&b.stopPropagation()});if("undefined"!=typeof d.showOn)if("object"==typeof d.showOn.value){var T=a.extend({},d.showOn);for(var I in d.showOn.value)T.value=d.showOn.value[I],B(e,f,c,T,b),"multirow"==i&&B(e,f,c+"-multirow-container",T,b)}else B(e,f,c,d.showOn,b),"multirow"==i&&B(e,f,c+"-multirow-container",d.showOn,b);if("undefined"!=typeof d.showFields){var U=s.find(".field-id-"+m);F=U.append('<div class="show-fields"/>').find(".show-fields"),G=m;for(var V in d.showFields)p.apply(F,[G+"_",V,d.showFields[V],e,f,"show-field-"+V]);F.find(".field-row").hide(),"image-selector"==i||"style-selector"==i?a("body").on("click","#"+G+"_container .op-asset-dropdown-list a",function(b){b.preventDefault();var c=a(this).find("img").attr("alt");F.find(".field-row").hide().filter(".show-field-"+c).show()}):a("#"+G).change(function(){F.find(".field-row").hide().filter(".show-field-"+a(this).val()).show()})}else if("undefined"!=typeof d.multirow){var F=h,G=m,W=!1;if("undefined"==typeof F&&(F=s.append('<div class="field-id-'+m+'-multirow-container multirow-container cf" />').find(".field-id-"+m+"-multirow-container")),"multirow"==i){var A,t=d.multirow.link_prefix||"",x=d.multirow.link_suffix||"";t=""==t?"":M(t)+" ",x=""==x?"":" "+M(x),remove_row="",remove_row_str='<a href="#" class="remove-row"><img src="'+OptimizePress.imgurl+'remove-row.png" alt="'+M("remove_row")+'" /></a>',a(".field-id-"+G+" a.new-row").click(function(b){var c=F.data("op_current_increment"),g=F.append('<div class="op-multirow cf" />').find(".op-multirow:last");c++,F.data("op_current_increment",c),remove_row=d.multirow.remove_row||"before","before"==remove_row&&g.append(remove_row_str);for(var h in d.multirow.attributes){var i=d.multirow.attributes[h],j=i.type||"";if(p.apply(g,[G+"_"+c+"_",h,i,e,f]),"undefined"!=typeof xb[G+"_"+h]){var k=a("#"+G+"_"+c+"_"+h+"_container");k.find("a.selected-item").html(k.find(".op-asset-dropdown-list").html(xb[G+"_"+h]).find("a:first").html())}if("undefined"!=typeof i.default_value)switch(j){case"style-selector":case"image-selector":P(G+"_"+c+"_"+h+"_container",q(i));break;case"wysiwyg":O(G+"_"+c+"_"+h,q(i));break;case"paragraph":a("#"+G+"_"+c+"_"+h).html(q(i));break;default:a("#"+G+"_"+c+"_"+h).val(q(i))}}"after"==remove_row&&g.append(remove_row_str),z(),"function"==typeof d.multirow.onAdd&&d.multirow.onAdd.apply(g,[nb[e][f]]),b.preventDefault()}),a(".field-id-"+G+"-multirow-container").delegate("a.remove-row","click",function(b){b.preventDefault();var c,d=a(this).parent();d.hasClass("pricing-table-row")||d.hasClass("op-feature-title-row")?d.remove():(c=a(this).closest(".op-multirow"),c.parent().next().find("a.new-row").focus(),c.remove())});for(var V in d.multirow.attributes)if("undefined"!=typeof d.multirow.attributes[V].folder){var X=d.multirow.attributes[V].type||"",Y=d.multirow.attributes[V].folder;"style-selector"==X?C("style",{fieldid:G+"_"+V,group:e,tag:f,folder:Y},d.multirow.attributes[V]):"image-selector"==X&&C("image",{fieldid:G+"_"+V,group:e,tag:f,folder:Y},d.multirow.attributes[V])}}else{var H=F.append('<ul class="op-multirow-tabs cf" />').find(".op-multirow-tabs");a("#"+m).change(function(){{var b=parseInt(a(this).val()),c=F.find(".op-multirow");H.find("li:visible").length}if(c.length<b){H.find("li").show().addClass("visible");var g,h=d.multirow.link_prefix||"",i=d.multirow.link_suffix||"";h=""==h?"":M(h)+" ",i=""==i?"":" "+M(i);for(var j=c.length;b>j;j++){g=F.append('<div class="op-multirow op-multirow-'+j+' cf" />').find(".op-multirow:last"),H.append('<li class="visible"><a href="#'+j+'">'+h+(j+1)+"</a></li>");for(var k in d.multirow.attributes){var l=d.multirow.attributes[k],m=l.type||"input";if(p.apply(g,[G+"_"+j+"_",k,l,e,f]),"undefined"!=typeof l.default_value)switch(m){case"style-selector":case"image-selector":P(G+"_"+j+"_"+k+"_container",q(l));break;case"wysiwyg":O(G+"_"+j+"_"+k,q(l));break;case"paragraph":a("#"+G+"_"+j+"_"+k).html(q(l));break;default:a("#"+G+"_"+j+"_"+k).val(q(l))}}W||(z(),W=!0),"function"==typeof d.multirow.onAdd&&d.multirow.onAdd.apply(F,[nb[e][f]])}}else H.find("li").filter(":gt("+(b-1)+")").hide().removeClass("visible").end().filter(":lt("+b+")").show().addClass("visible"),c.hide();c=H.find("li.visible.selected a"),0==c.length&&(c=H.find("li.visible:first a")),c.trigger("click")}).trigger("change")}}}}function q(b){return"undefined"!=typeof b.default_value?a.isFunction(b.default_value)?b.default_value():b.default_value:""}function r(b,c){var d=mb[b][c].attributes,e={},f="op_assets_"+b+"_"+c+"_",g=["h1","h2","h3","h4","h5","h6","p"],h="text";if("undefined"==typeof d)return e;for(var i in d)for(var j in d[i]){var k=d[i][j].type||"";if("column"==k)for(var l in d[i][j].elements){var k=d[i][j].elements[l].type||"";if("container"==k){var m=d[i][j].elements[l].showPanelControl||!1;if(1==m&&a("#panel_control_"+f+l).is(":checked")||0==m){for(var n in d[i][j].elements[l].attributes){var k=d[i][j].elements[l].attributes[n].type||"";if("text_properties"==k){e[n+"_text"]=t(f+l+"_"+n+"_text",{}),e[n+"_size"]=t(f+l+"_"+n+"_size",{}),e[n+"_color"]=t(f+l+"_"+n+"_color",{}),h="subtext_box"===l?"subtext":"text",e[n+"_bold"]=a(".field-id-"+f+l+"_"+n+' input[name="op_font[style_checkbox_'+h+'][bold]"]').is(":checked")?"Y":"",e[n+"_italic"]=a(".field-id-"+f+l+"_"+n+' input[name="op_font[style_checkbox_'+h+'][italic]"]').is(":checked")?"Y":"",e[n+"_underline"]=a(".field-id-"+f+l+"_"+n+' input[name="op_font[style_checkbox_'+h+'][underline]"]').is(":checked")?"Y":"";var o=a("#"+f+l+"_"+n+"_container a.selected-item img");e[n+"_font"]=o.length>0?o.attr("alt")+";"+o.attr("data-type"):""}else"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[n]=t(f+l+"_"+n,d[i][j].elements[l].attributes[n]))}e[l+"_panel"]="Y"}else e[l+"_panel"]="N"}else"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[l]=t(f+j,d[i][j].elements[l]))}else if("container"==k)for(var l in d[i][j].attributes){var k=d[i][j].attributes[l].type||"";"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[l]=t(f+j+"_"+l,d[i][j].attributes[l]))}else"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[j]=t(f+j,d[i][j]))}return e}function s(b,c){if(qb)return!1;var d=["h1","h2","h3","h4","h5","h6","p"];if("undefined"!=typeof mb[b][c]){var e="op_assets_"+b+"_"+c+"_";if("function"==typeof mb[b][c].customInsert){var f=r(b,c);mb[b][c].customInsert(f)}else{var g="",h="",i=!1;if("undefined"!=typeof mb[b][c].attributes)for(var j in mb[b][c].attributes)for(var k in mb[b][c].attributes[j]){var l=mb[b][c].attributes[j][k].type||"";if("microcopy"!=l&&"custom_html"!=l&&a.inArray(l,d)<0){var m=mb[b][c].attributes[j][k],n=t(e+k,m),o=!0;if("object"==typeof n)for(var p in n)g+=(""==g?"":" ")+k+"_"+p+'="'+n[p]+'"';else if("undefined"==typeof m.exclude||m.exclude!==!0){if("undefined"!=typeof m.showOn){o=!1;var q=m.showOn.field.split("."),s=t(e+q[1],mb[b][c].attributes[q[0]][q[1]]);if("object"==typeof m.showOn.value){for(var p in m.showOn.value)if(s==m.showOn.value[p]){o=!0;break}}else s==m.showOn.value&&(o=!0)}o&&("content"==k?(i=!0,""==n&&(n=" "),h=n):""!=n&&("undefined"!=typeof m.attr&&(k=m.attr),g+=(""==g?"":" ")+k+'="'+n+'"'))}}}var u="["+c+(""==g?"":" ")+g+"]";i&&(u+=h+"[/"+c+"]"),u+="",wpActiveEditor=wpActiveEditor||"content",G(u),a.fancybox.close()}}return!0}function t(b,c){var d=c.type||"input";if("undefined"!=typeof c.multirow){if(el=a(".field-id-"+b+"-multirow-container"),"multirow"==d){var e=[];el.find(".op-multirow, .op-feature-title-row").each(function(){var b=a(this),d={};for(var f in c.multirow.attributes){var g,h=c.multirow.attributes[f].type||"";"style-selector"==h||"image-selector"==h?(g=b.find('div[id$="_'+f+'_container"]').attr("id"),g=g.substring(0,g.length-10)):g=b.find(':input[id$="_'+f+'"]').attr("id"),d[f]=t(g,c.multirow.attributes[f])}e.push(d)})}else for(var e={total:t(b,{type:c.type}),rows:[]},f=0;f<e.total;f++){var g={};for(var h in c.multirow.attributes)g[h]=t(b+"_"+f+"_"+h,c.multirow.attributes[h]);e.rows.push(g)}return e}if("tabs"==d){var i={};for(var f in c.tabs){i[f]={};for(var j in c.tabs[f].fields)if(i[f][j]={},"column"==c.tabs[f].fields[j].type)for(var k in c.tabs[f].fields[j].elements){var d=c.tabs[f].fields[j].elements[k].type||"";if("container"==d){var l=c.tabs[f].fields[j].elements[k].showPanelControl||!1;if(1==l&&a("#panel_control_"+b+"_"+f+"_"+k).is(":checked")||0==l){for(var m in c.tabs[f].fields[j].elements[k].attributes){var d=c.tabs[f].fields[j].elements[k].attributes[m].type||"";if("text_properties"==d){i[f][j][m+"_text"]=t(b+"_"+f+"_"+k+"_"+m+"_text",{}),i[f][j][m+"_size"]=t(b+"_"+f+"_"+k+"_"+m+"_size",{}),i[f][j][m+"_color"]=t(b+"_"+f+"_"+k+"_"+m+"_color",{}),i[f][j][m+"_bold"]=a(".field-id-"+b+"_"+f+"_"+k+"_"+m+' input[name="op_font[style_checkbox_text][bold]"]').is(":checked")?"Y":"",i[f][j][m+"_italic"]=a(".field-id-"+b+"_"+f+"_"+k+"_"+m+' input[name="op_font[style_checkbox_text][italic]"]').is(":checked")?"Y":"",i[f][j][m+"_underline"]=a(".field-id-"+b+"_"+f+"_"+k+"_"+m+' input[name="op_font[style_checkbox_text][underline]"]').is(":checked")?"Y":"";var n=a("#"+b+"_"+f+"_"+k+"_"+m+"_container a.selected-item img");i[f][j][m+"_font"]=n.length>0?n.attr("alt")+";"+n.attr("data-type"):""}else"microcopy"!=d&&"custom_html"!=d&&(i[f][j][m]=t(b+"_"+f+"_"+k+"_"+m,c.tabs[f].fields[j].elements[k].attributes[m]))}i[f][j][k+"_panel"]="Y"}else i[f][j][k+"_panel"]="N"}else"microcopy"!=d&&"custom_html"!=d&&(i[f][j][k]=t(b+"_"+j,c.tabs[f].fields[j].elements[k]))}else i[f][j]=t(b+"_"+f+"_"+j,c.tabs[f].fields[j])}return i}var o;switch(d){case"slider":o=a("#"+b).slider("value");break;case"text_properties":break;case"font":var p=a(".field-id-"+b),q={size:["select:first","val"],font:[".op-asset-dropdown a:first img","attr","alt"],style:['select[name$="[style]"]',"val"],color:[".color-picker-container :input","val"],spacing:['select[name$="[spacing]"]',"val"],shadow:['select[name$="[shadow]"]',"val"]};o={},"undefined"!=typeof c.size_text&&(q.size[0]=':input[name$="[size]"]');for(var f in q){var r=a(q[f][0],p),s="";r.length>0&&(s="undefined"!=typeof q[f][2]?r[q[f][1]](q[f][2]):r[q[f][1]]()),""!=s&&(o[f]=s)}break;case"image-selector":case"style-selector":o=Q(b+"_container");break;case"checkbox":o=a("#"+b).is(":checked")?"Y":"";break;case"radio":o=a(".field-id-"+b+" :radio:checked").val();break;case"textarea":var u=c.format||"op_unautop";o=a("#"+b).val(),o="custom"===u?o:"br"==u?X(o):op_wpautop(o);break;case"wysiwyg":o=N(b);break;case"paragraph":o=a("#"+b).html();break;default:o=a("#"+b).val()}if("undefined"!=typeof c.showFields){var v={value:o,fields:{}};for(var h in c.showFields)v.value==h&&(v.fields[h]=t(b+"_"+h,c.showFields[h]));return v}return o}function u(b,c){var d,e;if(sb){if(c=c||"",a("#qt_"+b+"_toolbar").remove(),d=a("#op_dummy_wysiwyg").html().replace(/opassetswysiwyg/gi,b),e=a(d),e.find("#qt_"+b+"_toolbar").remove(),a("#"+b+"_tbl").remove(),this.append('<div class="op-wysiwyg"><div id="wp-'+b+'-wrap" class="wp-core-ui wp-editor-wrap tmce-active">'+e.html()+"</div></div>"),a("#qt_"+b+"_toolbar").remove(),tinyMCEPreInit.mceInit[b]=tinyMCEPreInit.mceInit.opassetswysiwyg,"function"==typeof QTags){var f={};f="undefined"!=typeof tinyMCEPreInit.qtInit.opassetswysiwyg?tinyMCEPreInit.qtInit.opassetswysiwyg:tinyMCEPreInit.qtInit.content,f.id=b;try{quicktags(f),QTags._buttonsInit()}catch(g){}}tinyMCE.execCommand("mceRemoveControl",!0,b),a("#"+b+"_tbl").remove(),a("#"+b).css({display:"block",height:"100px"}),a(".op-live-editor").length>0&&tinyMCE.execCommand("mceAddControl",!0,b)}else this.append('<textarea cols="30" rows="10" id="'+b+'" name="'+b+'" />')}function v(b,c){var d,e={size:"",font:".font-dropdown",style:"",spacing:"",shadow:""},f="",g=c.disable||{};for(var h in e)"undefined"==typeof yb[h]&&(d=a("#op_font"+h),""!=e[h]&&(d=d.find(e[h])),yb[h]=d.html());return"undefined"==typeof g.size&&(f+="undefined"!=typeof c.size_text?'<input type="text" name="'+b+'[size]" id="'+b+'_size" />px':'<select name="'+b+'[size]" id="'+b+'_size">'+yb.size+"</select>"),"undefined"==typeof g.font&&(f+=E(b,yb.font,"font-view")),"undefined"==typeof g.style&&(f+='<select name="'+b+'[style]" id="'+b+'_style">'+yb.style+"</select>"),"undefined"==typeof g.color&&(f+='<div class="color-picker-container cf"><input type="text" value="" id="'+b+'_color" name="'+b+'[color]" /><a href="#" class="op-pick-color hide-if-no-js"></a></div>'),"undefined"==typeof g.spacing&&(f+='<select name="'+b+'[spacing]" id="'+b+'_spacing">'+yb.spacing+"</select>"),"undefined"==typeof g.shadow&&(f+='<select name="'+b+'[shadow]" id="'+b+'_shadow">'+yb.shadow+"</select>"),""!=f?f='<div class="op-typeography font-chooser cf">'+f+'</div><a href="#reset-font" class="reset">'+M("reset")+"</a>":""}function w(b,c){var d,e={size:"",font:".font-dropdown",style_checkbox_text:"",style_checkbox_subtext:""},f="";if("op_assets_core_button_text_box_text_properties_1"===b||"op_assets_core_membership_order_button_text_box_text_properties_1"===b||"op_assets_core_membership_order_button_text_box_text_properties_1"===b||"op_assets_core_op_popup_text_box_text_properties_1"===b||"op_assets_core_optin_box_tabs_submit_button_text_box_text_properties_1"===b||"op_assets_core_optin_modal_tabs_submit_button_text_box_text_properties_1"===b)var g="style_checkbox_text";else var g="style_checkbox_subtext";for(var h in e)"undefined"==typeof yb[h]&&(d=a("#op_font"+h),""!=e[h]&&(d=d.find(e[h])),yb[h]=d.html());return f+='<input type="text" name="'+b+'[text]" id="'+b+'_text" value="'+("undefined"!=typeof c.text_default?c.text_default:"")+'" />',f+="undefined"!=typeof c.size_text?'<input type="text" name="'+b+'[size]" id="'+b+'_size" />px':'<select name="'+b+'[size]" id="'+b+'_size">'+yb.size+"</select>",f+=E(b,yb.font,"font-view"),f+='<div class="color-picker-container cf"><input type="text" value="" id="'+b+'_color" name="'+b+'[color]" /><a href="#" class="op-pick-color hide-if-no-js"></a></div>',f+='<div class="style-checkbox-selector cf">'+yb[g]+"</div>"}function x(a,b,c,d,e,f){var g="";switch(f=f||!1,d=d||"",e=e||!1,a){case"checkbox":g='<input type="checkbox" name="'+b+(f?'" id="'+b+'"':'[]"')+' value="'+c+'"'+(e?' checked="checked"':"")+" />",""!=d&&(g="<label>"+g+" "+d+"</label>");break;case"radio":g='<input type="radio" name="'+b+'[]" value="'+c+'"'+(e?' checked="checked"':"")+" />",""!=d&&(g="<label>"+g+" "+d+"</label>");break;case"select":g='<option value="'+c+'"'+(e?' selected="selected"':"")+">"+d+"</option>";break;case"membership_select":if(""!=c){var h=c.split("-");c=h[1],classStr=h[0]}else classStr="",c="";g='<option class="parent-'+classStr+'" value="'+c+'"'+(e?' selected="selected"':"")+">"+d+"</option>"}return g}function y(a,b,c,d,e){var f="",g=q(b);if("undefined"!=typeof b.folder)C(c,{fieldid:a,group:d,tag:e,folder:b.folder},b);else if("undefined"!=typeof b.valueRange){var h=b.valueRange.finish+1,i=b.valueRange.text_prefix||"",j=b.valueRange.text_suffix||"";i=""==i?"":M(i)+" ",j=""==j?"":" "+M(j);for(var k=b.valueRange.start;h>k;k++)f+=x(c,a,k,i+k+j,g==k)}else if("undefined"!=typeof b.values)for(var l in b.values)f+=x(c,a,l,M(b.values[l]),g==l);else f+=x(c,a,"Y","","Y"==g,!0);return f}function z(){for(var b in wb){var c=bb.find("."+b),d=[];for(var e in wb[b]){var f=wb[b][e];"image-selector"==f.type||"style-selector"==f.type||"button_preview"==f.type?(a("#"+e+"_container").data({show_on_values:f.values}),a("#"+e+"_container").on("click",".op-asset-dropdown-list a",function(b){b.preventDefault(),A.apply(c,[a(this).find("img").attr("alt"),a(this).closest(".op-asset-dropdown").data("show_on_values")])})):(d.push("#"+e),c.find("#"+e).data({show_on_values:f.values}).change(function(){A.apply(c,[a(this).val(),a(this).data("show_on_values")])}).trigger("change"))}}wb={}}function A(b,c){var d,e,f,g,h,i=this,j="",k={},l=[],m=0;for(f in c){for(d=[],e=[],m=0;m<c[f].length;m+=1)d.push(c[f][m].selector),e.push(c[f][m].displayType);l.push(d);var n=d.join(",");f==b?(j=n,g=d,h=e):"undefined"==typeof k[n]&&(k[n]=!0,i.find(n).css("display","none"))
}if(""!=j)for(a(j).css("display","block").find(":input").trigger("change"),m=0;m<g.length;m+=1)a(g[m]).css("display",h[m]).find(":input").trigger("change")}function B(a,b,c,d,e){var f="op-settings-"+a+"-"+b,g=d.field.split("."),h=g[g.length-1];if(h="undefined"!=typeof d.idprefix?d.idprefix+h:e+h,"undefined"==typeof wb[f]&&(wb[f]={}),"undefined"==typeof wb[f][h]){wb[f][h]={values:{}};for(var i=mb[a][b].attributes,j=0,k=g.length;k>j;j++)i=i[g[j]];wb[f][h].type="undefined"!=typeof d.type?d.type:i.type||"input"}"undefined"==typeof wb[f][h].values[d.value]&&(wb[f][h].values[d.value]=[]),wb[f][h].values[d.value].push({selector:".field-id-"+e+c,displayType:d.displayType||"block"})}function C(a,b,c){"undefined"!=typeof c.asset&&(b.group=c.asset[0],b.tag=c.asset[1]),"undefined"!=typeof c.ignore_vals&&(b.ignore_vals=c.ignore_vals),"undefined"==typeof vb[a]&&(vb[a]=[]),vb[a].push(b)}function D(a,b){return b=b||"",'<div class="op-asset-dropdown-list">'+b+"</div>"}function E(a,b,c){return b=b||"",""!=c&&(Cb[c]=!0),'<div class="op-asset-dropdown'+(""==b?" loading-asset-dropdown":"")+" "+c+'" id="'+a+'_container"><a class="selected-item" href="#"></a><div class="op-asset-dropdown-list">'+b+"</div></div>"}function F(){0==a("#op-color-picker").length&&a("body").append('<div id="op-color-picker" />'),gb=a("#op-color-picker"),fb=a.farbtastic("#op-color-picker",K),bb.on("focus",".color-picker-container :input",function(){$cp_link="undefined"==typeof a(this).data("cp_link")?a(this).siblings("a.op-pick-color"):a(this).data("cp_link"),a(this).data("cp_link",$cp_link),$cp_link.trigger("click")}).on("blur",".color-picker-container :input",function(){var b=a(this),c=L(b.val());c="#"===c?"":c,eb&&eb[1]&&K(c),gb.hide()}).on("change",".color-picker-container :input",function(){var b=a(this),c=L(b.val());$cp_link="undefined"==typeof b.data("cp_link")?a(this).siblings("a.op-pick-color"):b.data("cp_link"),a(this).data("cp_link",$cp_link),$cp_link.css("background-color","#"==c?"transparent":c),gb.is(":visible")&&"#"!=c&&fb.setColor(c)}),bb.on("click","a.op-pick-color",function(b){$input="undefined"==typeof a(this).data("input")?a(this).prev("input"):a(this).data("input"),a(this).data("input",$input),eb=[a(this),$input],K(eb[1].val()),gb.position({of:eb[0],my:"left top",at:"left bottom"}).show(),b.preventDefault()})}function G(a){"undefined"!=typeof op_le_insert_content?op_le_insert_content(a):send_to_editor(a+"<br /><br />")}function H(b,c,d){if("function"==typeof d.customSettings)d.customSettings(b,c);else for(var e="op_assets_"+b.asset[0]+"_"+b.asset[1]+"_",f=b.attrs||{},g=1;4>g;g++)if("undefined"!=typeof d.attributes["step_"+g])for(var h in d.attributes["step_"+g]){var i=d.attributes["step_"+g][h],j=i.type||"input",k=f[h]||"";switch(j){case"multirow":if(k=b[h]||"","object"==typeof k)for(var l,m=c[g-1].find(".field-id-"+e+h+" a.new-row"),n=c[g-1].find(".field-id-"+e+h+"-multirow-container"),o=0,p=k.length;p>o;o++)m.trigger("click"),l=n.find("> .op-multirow:last"),a.each(i.multirow.attributes,function(a,b){var c=k[o].attrs[a]||"";"textarea"==(b.type||"input")&&(c=op_unautop(c)),l.find(':input[name$="'+a+'"]').val(c)});break;case"style-selector":case"image-selector":P(e+h+"_container",k);break;case"checkbox":a("#"+e+h).attr("checked","Y"==k).trigger("change");break;case"radio":a(".field-id-"+e+h+' :radio[value="'+k+'"]').attr("checked",!0).trigger("change");break;case"font":S(h,f,e+h);break;case"wysiwyg":O(e+h,k);break;case"textarea":var q=i.format||"op_unautop";"custom"===q?a("#"+e+h).val(k):a("#"+e+h).val("br"==q?Y(k):op_unautop(k));break;case"media":T(e+h,k);break;case"paragraph":"string"==typeof k&&""!=k&&a("#"+e+h).html(k).trigger("change");break;default:a("#"+e+h).val(k).trigger("change")}}}function I(b){var d=b.asset;bb.addClass("edit-mode"),pb=!0,qb=!0,"undefined"!=typeof op_assets[d[0]]&&"undefined"!=typeof op_assets[d[0]][d[1]]&&(c(kb[1].find('a[href$="#'+d[0]+"/"+d[1]+'"]')),bb.find(".op_asset_browser_slide .settings-container").css("display","none"),e(d,function(c,d){H(b,c,d),qb=!1,pb=!1,"undefined"!=typeof d.default_slide?a.isFunction(d.default_slide)?g(d.default_slide(c)):g(d.default_slide):"undefined"!=typeof c[1]?g(3,!1):g(2,!1)}))}function J(b){a(".color-picker-container :input",b).each(function(){var b=a(this).siblings("a.op-pick-color");b.data("input",a(this)),a(this).data("cp_link",b).data("cp_link").css("background-color",L(a(this).val()))})}function K(b){fb.setColor(b),eb[1].val(b),eb[0].css("background-color",b),a("#op_asset_browser_slide3 .op-settings-"+Ab[0]+"-"+Ab[1]).trigger({type:"update_button_preview",id:eb[1].attr("id"),value:b,tag:Ab[1]})}function L(a){return"#"+a.replace(/[^a-fA-F0-9]/,"")}function M(a){return a&&"string"==typeof a?op_assets_lang[a]||a.replace(/{\#([^}]+)\}/g,function(a,b){return op_assets_lang[b]||"{#"+b+"}"}):""}function N(b){var c="";if(sb){var d=tinyMCE.get(b);c=d&&d.isHidden()||!d?op_wpautop(a("#"+b).val()):d.getContent()}else c=a("#"+b).val();return c=ub?op_wpautop(c):op_unautop(c)}function O(b,c){if(sb){a("#wp-"+b+"-wrap").removeClass("html-active").addClass("tmce-active");var d=tinyMCE.get(b);d?d.setContent(op_wpautop(c),{no_events:!0}):(0===a(".op-live-editor").length&&switchEditors.go(b,"tmce"),a("#"+b).val(op_unautop(c)))}else a("#"+b).val(op_unautop(c))}function P(b,c){if("op_assets_core_button_button_preview_container"!=b&&"op_assets_core_membership_order_button_button_preview_container"!=b&&"op_assets_core_optin_box_tabs_submit_button_button_preview_container"!=b&&"op_assets_core_optin_modal_tabs_submit_button_button_preview_container"!=b&&"op_assets_core_op_popup_button_preview_container"!=b){c="undefined"!=typeof c?c:"";var d=a("#"+b),e=d.parent(),f=e.hasClass("op-disable-selected"),g=d.data("show_on_values");""==c?f?(d.find(".selected").removeClass("selected"),c=null):c=a("#"+b+" a.selected-item").html(a("#"+b+" .op-asset-dropdown-list a:first").html()).find("img").attr("alt"):f?d.find(".selected").removeClass("selected").end().find('img[alt="'+c+'"]').parent().trigger("click"):d.find("a.selected-item").html(d.find('img[alt="'+c+'"]').parent().html()),"undefined"!=typeof g&&null!==c&&A.apply(d.closest(".op_asset_browser_slide"),[c,g])}}function Q(b){var c=a("#"+b);return c=c.closest(".field-row").hasClass("op-disable-selected")?c.find(".selected img"):c.find(".selected-item img"),c.attr("alt")}function R(b,c){a("#"+b).val(c).next("a.op-pick-color").css({backgroundColor:c})}function S(b,c,d){var e=["size","font","style","color","spacing","shadow"];a.each(e,function(e,f){var g=b+"_"+f,h=c[g]||"";"font"==f?P(d+"_container",h):a("#"+d+"_"+f).val(h).trigger("change")})}function T(b,c,d){d=d===!1?!1:!0;var e=a("#"+b),f=e.next().find(".content");if("undefined"==typeof c||""==c)return f.html(""),e.val(""),d&&e.trigger("change"),void 0;var g=c.match(/\.([^.]+)$/);e.val(c),d&&e.trigger("change"),g=null===g?!1:g[1],a.inArray(g,["jpg","jpeg","gif","png"])>-1?f.html('<a href="'+c+'" target="_blank" class="preview-image"><img src="'+c+'" alt="uploaded-image" /></a><a href="#remove" class="remove-file">'+M("remove_image")+"</a>"):f.html('<a href="'+c+'" target="_blank" class="preview-image">'+M("view_file")+'</a><a href="#remove" class="remove-file">'+M("remove_file")+"</a>")}function U(a){return a=a||"","undefined"!=typeof op_le_column_width?op_le_column_width():a}function V(){sb&&rb!==!0&&(rb=!0,tb&&"string"!=typeof this.content&&this.content.find(".wp-editor-area").each(function(){var b=a(this).attr("id"),c=tinyMCE.get(b);c&&"opassetswysiwyg"!=b&&(tinyMCE.execCommand("mceFocus",!1,b),tinyMCE.execCommand("mceRemoveControl",!1,b))}))}function W(b){b=0===b?0:1,a.fancybox.open({type:"inline",scrolling:"no",autoSize:!1,fitToView:!1,helpers:{overlay:{closeClick:!1}},keys:!1,margin:0,padding:0,width:760,height:500,minHeight:500,maxHeight:500,href:"#op_asset_browser_container",beforeClose:V,beforeLoad:function(){a("#op_asset_browser_container").css({position:"fixed",top:0,height:"100%",bottom:0})},beforeShow:function(){d(),g(b,!1),a("html").css({overflow:"hidden",height:"100%"}),a(window.parent.document).find(".fancybox-close").css({display:"none"})},afterShow:function(){var c;a("#op_asset_browser_container").css({position:"static",top:"auto"}).find(".op_asset_content").css({height:"100%"}),$fancyBoxOpened=a(".fancybox-opened").eq(-1),$fancyBoxIframe=$fancyBoxOpened.find("iframe"),$fancyBoxIframe.length>0?$fancyBoxIframe.focus():(c=$fancyBoxOpened.find("#op_asset_browser_container"),c.length>0?($fancyBoxOpened.find(".op_asset_browser_slide").eq(b).addClass("op_asset_browser_slide_active").find(".op_asset_content").addClass("op_no_outline").attr("tabindex",0).focus(),h()):$fancyBoxOpened.find(".fancybox-inner").addClass("op_no_outline").attr("tabindex",0).focus())},afterClose:function(){rb=!1,g(1),bb.find(".multirow-container:not(.field-type-tabs)").find(".op-multirow-tabs li").remove().end().find(".op-multirow").remove(),a("#op_asset_browser_slider .op_asset_browser_slide_active").removeClass("op_asset_browser_slide_active"),a("html").css({overflow:"auto",height:"auto"}),a(window.parent.document).find(".fancybox-close").css({display:"block"})}})}function X(a){return a=a.replace(/(\r\n|\n)/g,"<br />")}function Y(a){return a=a.replace(/<br\s*\/?>/g,"\n",a)}function Z(a,b){var c,d,e=ob[a][b];for(i=0;3>i;i++)c=e[i],d=lb[i+2].find(".help-vid-link"),""!=c?d.html(c):d.html(ob.defaults[i])}function $(a){var b="{'playlist':[{'autoPlay':true,'autoBuffering':true,'url':'"+a.url.split("/").join("\\/")+"'}],'plugins':{'controls':{'url':'"+OptimizePress.flowplayer_control.split("/").join("\\/")+"'}}}";return'<a href="'+OptimizePress.flowplayer+"?config="+b+'" title="'+M("help_video")+'" tabindex="-1" class="help-me"><span>?</span></a> <div>     <input type="hidden" name="help_vid_width[]" value="'+a.width+'" class="help_vid_width" />     <input type="hidden" name="help_vid_height[]" value="'+a.height+'" class="help_vid_height" /> </div>'}function _(){Cb["help-video"]=!0,bb.delegate("a.help-me","click",function(b){b.preventDefault();var c=a(this),d=c.next(),e=d.find(".help_vid_width").val(),f=d.find(".help_vid_height").val();b.preventDefault();for(var g in Cb)ib.removeClass(g);ib.addClass("help-video");var h='<div style="width:{width}px;height:{height}px;margin:0 auto"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="transparent"></embed></object></div>'.replace(/\{width\}/g,e).replace(/\{height\}/g,f).replace(/\{href\}/g,c.attr("href"));ib.html(h),hb.show().animate({bottom:0},400)})}function ab(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var bb,cb,db,eb,fb,gb,hb,ib,jb,kb=[],lb=[],mb={core:{},addon:{},theme:{}},nb={core:{},addon:{},theme:{}},ob={defaults:[],core:{},addon:{},theme:{}},pb=!1,qb=!1,rb=!1,sb=!1,tb=!1,ub=!1,vb={},wb={},xb={},yb={},zb="",Ab=[],Bb={},Cb={};a(document).ready(function(){var d,f,i,k,l,m,n=0;for("undefined"!=typeof switchEditors&&(tb=!0),sb="undefined"!=typeof tinyMCE&&"undefined"!=typeof tinyMCEPreInit.mceInit.opassetswysiwyg,ub="undefined"!=typeof pagenow,bb=a("#op_asset_browser_container"),cb=a("#op_asset_browser_slider"),db=a("#op_assets_waiting"),n=0;5>n;n++)kb.push(a("#op_asset_browser_slide"+n)),lb.push(kb[n].find(".op_asset_content"));for(d=lb[1].find("div.asset-list"),f=d.parent(),i=a("#op_asset_browser_no_assets"),k=function(b,c){var e,c=c,f=a.trim(c.val()),g=d.find("li");f&&""!==f?(f=f.toLowerCase(),m=!1,e=g.find("span.title"),e.each(function(){var b=a(this),c=b.text().toLowerCase(),d=c.indexOf(f)>-1,e="hidden",g="visible",h="hide";d&&(m=!0,e="visible",g="hidden",h="fadeIn",h="show"),b.closest("li").filter(d?":not(:visible)":":visible").addClass(e).removeClass(g).stop()[h]()}),m||e.each(function(){var b,c,d,e=a(this),g=e.text().toLowerCase(),h=!0;for(b=f.split(" "),c=b.length,d=0;c>d;d+=1)if(g.indexOf(b[d])<0){h=!1;break}h&&(m=!0,e.closest("li").addClass("visible").removeClass("hidden").stop().show())}),m?(d.show(),i.hide(),d.find("a:visible").length<=0&&(d.hide(),i.show())):(d.hide(),i.show())):(d.show(),g.filter(":not(:visible)").show(),i.hide())},a("#op_assets_filter").keydown(function(){clearTimeout(l)}).keyup(function(b){var c=a(this);l=setTimeout(function(){k(b,c)},60)}).change(function(){a(this).trigger("keyup")}),a("#op-insert-asset").click(function(a){OP.previousWpActiveEditor=wpActiveEditor,a.preventDefault(),W()}),F(),a(".asset-list a",kb[1]).click(function(b){bb.removeClass("edit-mode"),b.preventDefault();var d=a(this),f=a(this).get_hash();zb=f,f=f.split("/"),2==f.length&&(bb.find(".op_asset_browser_slide .settings-container").css("display","none"),"undefined"!=typeof op_assets[f[0]]&&"undefined"!=typeof op_assets[f[0]][f[1]]&&(e(f),c(d),g(2)))}),a(window).on("keydown",function(b){var c,d=a(document.activeElement),e=j(),f=5,i=0;switch(b.which){case 83:case 111:case 55:if(d.is("#op_assets_filter")||1!==j())return;b.preventDefault(),a("#op_assets_filter").focus();break;case 900:3===e||4===e||2===e&&a("#op_asset_browser_slide2").find(".op-settings-core-custom_html").is(":visible")||2===e&&a("#op_asset_browser_slide2").find(".op-settings-core-img_alert").is(":visible")||2===e&&a("#op_asset_browser_slide2").find(".op-settings-core-javascript").is(":visible")||2===e&&a("#op_asset_browser_slide2").find(".op-settings-core-vertical_spacing").is(":visible")?(!d.hasClass("op-bsw-green-button")||d.next().is("a")||b.shiftKey||b.preventDefault(),b.shiftKey&&d.is(".op_asset_content.op_no_outline")&&b.preventDefault()):((1===e||2===e)&&(c=a.Event("keydown"),c.which=b.shiftKey?38:40,a(window).trigger(c)),b.preventDefault());break;case 27:e>1&&a(".fancybox-opened").eq(-1).find(".op_asset_browser_slide_active").find(".op_asset_content").focus();break;case 33:if(1===e||2===e){for(c=a.Event("keydown"),c.which=38,i=0;f>i;i+=1)a(window).trigger(c);b.preventDefault()}break;case 34:if(1===e||2===e){for(c=a.Event("keydown"),c.which=40,i=0;f>i;i+=1)a(window).trigger(c);b.preventDefault()}break;case 40:1===e&&(b.preventDefault(),d.parent().is(".op-asset-list-item")&&d.parent().nextAll(".op-asset-list-item:visible").length>0?d.removeClass("op-last-selected-asset-list-item selected").parent().nextAll(".op-asset-list-item:visible").eq(0).find("a").addClass("op-last-selected-asset-list-item").focus():d.is("#op_assets_filter")?a(".asset-list li:visible").eq(0).find("a").focus():h()),2===e&&(b.preventDefault(),d.parent().is(".op-asset-dropdown-list-item:visible")&&d.parent().next(".op-asset-dropdown-list-item:visible").length>0?d.removeClass("op-last-selected-asset-dropdown-list-item selected").parent().next(".op-asset-dropdown-list-item").find("a").addClass("op-last-selected-asset-dropdown-list-item").focus():d.is("#op_assets_filter")?a(".op-asset-dropdown-list-item:visible").eq(0).find("a").focus():h());break;case 38:if(1===e){if(b.preventDefault(),d.is("#op_assets_filter"))return;d.parent().is(".op-asset-list-item")&&d.parent().prevAll(".op-asset-list-item:visible").length>0?d.removeClass("op-last-selected-asset-list-item").parent().prevAll(".op-asset-list-item:visible").eq(0).find("a").addClass("op-last-selected-asset-list-item").focus():d.parent().is(".op-asset-list-item")?a("#op_assets_filter").focus():h()}2===e&&(b.preventDefault(),d.parent().is(".op-asset-dropdown-list-item:visible")&&d.parent().prev(".op-asset-dropdown-list-item:visible").length>0?d.removeClass("op-last-selected-asset-dropdown-list-item").parent().prev(".op-asset-dropdown-list-item").find("a").addClass("op-last-selected-asset-dropdown-list-item").focus():d.is("#op_assets_filter")?a(".op-asset-dropdown-list-item:visible").eq(0).find("a").focus():h());break;case 39:d.parent().is(".op-asset-list-item")||d.parent().is(".op-asset-dropdown-list-item")?d.trigger("click"):2===e&&a("#op_asset_browser_slide2").find(".op-asset-dropdown-list-item .selected").trigger("click");break;case 37:e>1&&(d.parent().hasClass("op-asset-dropdown-list-item")||!d.is(".insert-media, a, input, textarea, select, .op-bsw-green-button"))&&g(e-1,!0)}}),bb.on("click","a.op-slide-link",function(b){b.preventDefault(),g(a(this).get_hash()),a(b.target).parent().parent().hasClass("op-settings-core-membership_order_button")&&a("#op_assets_core_membership_order_button_gateway").trigger("change")}),hb=bb.find(".sneezing-panda").hide(),ib=hb.find(".content"),kb[3].add(kb[4]).delegate(".op-asset-dropdown .selected-item","click",function(b){b.preventDefault(),jb=a(this);var c=jb.closest(".op-asset-dropdown");for(var d in Cb)ib.removeClass(d),c.hasClass(d)&&ib.addClass(d);ib.html(jb.next().html()),hb.show().animate({bottom:0},400)}),hb.find(".hide-the-panda").click(function(a){a.preventDefault(),b()}),ib.delegate("li a","click",function(c){c.preventDefault();var d=a(this);"op_assets_core_button_button_preview_container"!=jb.parent().attr("id")&&"op_assets_core_optin_box_tabs_submit_button_button_preview_container"!=jb.parent().attr("id")&&"op_assets_core_optin_modal_tabs_submit_button_button_preview_container"!=jb.parent().attr("id")&&"op_assets_core_membership_order_button_button_preview_container"!=jb.parent().attr("id")&&"op_assets_core_op_popup_button_preview_container"!=jb.parent().attr("id")&&jb.html(d.html()).parent().find('li img[alt="'+d.find("img").attr("alt")+'"]').parent().trigger("click"),a("#op_asset_browser_slide3 .op-settings-"+Ab[0]+"-"+Ab[1]).trigger({type:"update_button_preview",id:jb.parent().attr("id"),value:d.find("img").attr("alt"),font_type:d.find("img").attr("data-type"),font_family:d.find("img").attr("data-family"),group:Ab[0],tag:Ab[1]}),b()}),a(document).mousedown(function(c){gb.hide().css({top:"auto",left:"auto"}),0==a(c.target).closest(".sneezing-panda").length&&b()}).trigger("mousedown"),kb[2].delegate(".op-disable-selected a","click",function(b){b.preventDefault(),a(this).closest(".op-asset-dropdown-list").find("a.selected").removeClass("selected").end().end().addClass("selected"),g(3)}),a("body").on("click",".wp-editor-wrap",function(){wpActiveEditor=a(this).find("textarea").attr("id")}),a("body").on("mousedown",".op-insert-buttons",function(){wpActiveEditor=OP.previousWpActiveEditor,OP.previousWpActiveEditor=void 0}),bb.delegate(".op-multirow-tabs li a","click",function(b){b.preventDefault();var c=a(this),d=c.closest("ul"),e=d.parent(),f=d.find("li").index(c.parent());d.find("li").removeClass("selected").filter(":eq("+f+")").addClass("selected"),e.find("> .op-multirow").hide().filter(":eq("+f+")").show(),a(".field-feature_title").parent().show()}).delegate('a[href$="#reset-font"]',"click",function(b){var c=a(this).prev(),d=c.find(".font-view");c.find(":input").val("").trigger("change"),d.find(".selected-item").html(d.find("li:first a").html()),b.preventDefault()}),n=1;5>n;n++)ob.defaults.push(a("#op_asset_browser_slide"+n+" .help-vid-link").html());_()});a.fn.get_hash=function(){return a.get_hash(this.attr("href"))},a.get_hash=function(a){return a=a.split("#"),a[1]},a.object_length=function(a){var b=0;for(var c in a)b++;return b},window.OP_AB={autop:op_wpautop,br2nl:Y,column_width:U,edit_element:I,reset_form:m,insert_content:G,get_selector_value:Q,nl2br:X,open_dialog:W,resize_content_areas:d,set_font_settings:S,set_selector_value:P,set_color_value:R,set_wysiwyg_content:O,set_uploader_value:T,show_slide:g,get_active_slide:j,encode_html:ab,trigger_insert:function(){s(Ab[0],Ab[1])},translate:M,unautop:op_unautop,wysiwyg_content:N},a.expr[":"].icontains=function(b,c,d){return(b.textContent||b.innerText||a(b).text()||"").toLowerCase.indexOf(d[3].toLowerCase())>=0},a(document).on("update_button_preview",".op-settings-core-op_popup",function(a){return op_custom_popup.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-button",function(a){return op_custom_button.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-membership_order_button",function(a){return op_custom_membership_button.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-optin_box",function(a){return op_custom_optin_button.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-optin_modal",function(a){return op_custom_optin_button.update(a),!1})}(opjq);