var op_cur_html,cur=[];!function(a){function b(){localStorage.getItem("op_row")?a(".paste-row").show():a(".paste-row").hide()}function c(){var b,c=a(".op-content-slider-button");c.each(function(){b=a(this);var c=a("#"+a(this).data("target"));a(this).unbind("click").click(function(a){var b=window.pageYOffset;c.show().animate({top:b},400),a.preventDefault()}),c.find(".hide-the-panda").unbind("click").click(function(b){var d=window.pageYOffset;c.animate({top:-d},400,function(){a(this).hide()}),b.preventDefault()}),c.on("click","ul.op-image-slider-content li a",function(d){var e=b.next("input.op-gallery-value"),f=(e.next(".file-preview").find(".content"),a(this).find("img").attr("src")),g='<a class="preview-image" target="_blank" href="'+f+'"><img alt="uploaded-image" src="'+f+'"></a><a class="remove-file button" href="#remove">Remove Image</a>';e.val(f),e.parent().next(".op-file-uploader").find(".file-preview .content").empty().html(g).find(".remove-file").click(function(){a(this).parent().empty().parent(".file-preview").prev(".op-uploader-value").val("")}),a("#op_page_thumbnail").val(f),c.animate({top:-475},400,function(){a(this).hide()}),d.preventDefault()})})}function d(){var b=a("#le-layouts-dialog .op-insert-button");z.on("click","#le-layouts-dialog ul.op-bsw-grey-panel-tabs a",function(c){c.preventDefault(),"predefined"==a(this).get_hash()?b.show():b.hide()}),z.on("click","#export_layout_category_create_new",function(b){b.preventDefault(),a("#export_layout_category_select_container:visible").fadeOut("fast",function(){a("#export_layout_category_new_container").fadeIn("fast")})}),z.on("click","#export_layout_category_select",function(b){b.preventDefault(),a("#export_layout_category_new_container:visible").fadeOut("fast",function(){a("#export_layout_category_select_container").fadeIn("fast")})}),z.on("click","#export_layout_category_new_submit",function(b){b.preventDefault();var c=a(this).next().find("img").fadeIn("fast"),d=a(this).prev().val(),e={action:OptimizePress.SN+"-live-editor-create-category",_wpnonce:a("#_wpnonce").val(),category_name:d};a.post(OptimizePress.ajaxurl,e,function(b){c.fadeOut("fast"),"undefined"!=typeof b.error?alert(b.error):(a("#export_layout_category").html(b.html),a("#export_layout_category_select").trigger("click"))},"json")}),a("#le-membership-dialog").submit(function(b){b.preventDefault(),a.fancybox.close(),a.fancybox.showLoading();var c={action:OptimizePress.SN+"-live-editor-membership",_wpnonce:a("#_wpnonce").val(),page_id:a("#page_id").val()};a.extend(c,q(a(this))),n(),a.post(OptimizePress.ajaxurl,c,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OP.disable_alert=!0,window.location.reload())},"json")}),a("#le-headers-dialog").submit(function(b){b.preventDefault();a(this).find(":radio:checked").val();a.fancybox.close();var c={action:OptimizePress.SN+"-live-editor-headers",_wpnonce:a("#_wpnonce").val(),page_id:a("#page_id").val()};a.extend(c,q(a(this))),n(),a.post(OptimizePress.ajaxurl,c,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OP.disable_alert=!0,window.location.reload())},"json")}),a("#le-colours-dialog").submit(function(b){b.preventDefault();a(this).find(":radio:checked").val();a.fancybox.close();var c={action:OptimizePress.SN+"-live-editor-colours",_wpnonce:a("#_wpnonce").val(),page_id:a("#page_id").val()};a.extend(c,q(a(this))),n(),a.post(OptimizePress.ajaxurl,c,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OP.disable_alert=!0,window.location.reload())},"json")}),a("#le-layouts-dialog").submit(function(b){b.preventDefault();var c=a(this).find(":radio:checked").val();a.fancybox.close(),a.fancybox.showLoading();var d={action:OptimizePress.SN+"-live-editor-get-layout",_wpnonce:a("#_wpnonce").val(),layout:c,page_id:a("#page_id").val(),keep_options:[]};a("#content_layout_keep_options :checkbox:checked").each(function(){d.keep_options.push(a(this).val())}),a.post(OptimizePress.ajaxurl,d,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OP.disable_alert=!0,window.location.reload())},"json")}),z.on("click","#op_export_content a.delete-file",function(b){b.preventDefault();var c=a(this).parent().prev().fadeIn("fast"),d={action:OptimizePress.SN+"-live-editor-deleted-exported-layout",_wpnonce:a("#_wpnonce").val(),filename:a("#zip_filename").val()};a.post(OptimizePress.ajaxurl,d,function(b){c.fadeOut("fast"),"undefined"!=typeof b.error&&alert(b.error),a("#op_export_content").html("")},"json")}),z.on("click","#export_layout_submit",function(b){b.preventDefault(),a("#op_export_content").html("");var c=a(this).next().fadeIn("fast"),d={action:OptimizePress.SN+"-live-editor-export-layout",status:a("#op-live-editor-status").val(),_wpnonce:a("#_wpnonce").val(),layout_name:a("#export_layout_name").val(),layout_description:a("#export_layout_description").val(),layout_category:a("#export_layout_category").val(),image:a("#export_layout_image_path").val(),page_id:a("#page_id").val(),op:{},layouts:{}};a("div.editable-area").each(function(){var b=a(this).data("layout");d.layouts[b]=m(a(this))}),"undefined"!=typeof OP_Feature_Area&&(d.feature_area=OP_Feature_Area);for(var e=["typography","settings"],f=0,g=e.length;g>f;f++)a.extend(d.op,q(a("#le-"+e[f]+"-dialog")).op||{});a.post(OptimizePress.ajaxurl,d,function(b){c.fadeOut("fast"),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.output&&a("#op_export_content").html(b.output)},"json")}),a("#op_header_layout_nav_bar_alongside_enabled").change(function(){a("#advanced_colors_nav_bar_alongside").toggle(a(this).is(":checked"))}).trigger("change"),a("#op_footer_area_enabled").change(function(){a("#advanced_colors_footer").toggle(a(this).is(":checked"))}).trigger("change"),a("#op_footer_area_enabled").parentsUntil(".section-footer_area",".op-bsw-grey-panel-header").next().hide(),a("#op_header_layout_nav_bar_below_enabled").change(function(){a("#advanced_colors_nav_bar_below").toggle(a(this).is(":checked"))}).trigger("change"),a("#op_header_layout_nav_bar_above_enabled").change(function(){a("#advanced_colors_nav_bar_above").toggle(a(this).is(":checked"))}).trigger("change")}function e(){z.on("click","#op-save-preset",function(b){b.preventDefault(),a.fancybox.open(a.extend({},A,{type:"inline",href:"#le-presets-dialog"}))}),a("#le-presets-dialog").submit(function(b){b.preventDefault();var c={action:OptimizePress.SN+"-live-editor-save-preset",status:a("#op-live-editor-status").val(),_wpnonce:a("#_wpnonce").val(),page_id:a("#page_id").val(),op:{},preset:q(a("#le-presets-dialog")),layouts:{}};a("div.editable-area").each(function(){var b=a(this).data("layout");c.layouts[b]=m(a(this))}),"undefined"!=typeof OP_Feature_Area&&(c.feature_area=OP_Feature_Area);for(var d=["typography","settings"],e=0,f=d.length;f>e;e++)a.extend(c.op,q(a("#le-"+d[e]+"-dialog")).op||{});a.post(OptimizePress.ajaxurl,c,function(b){"undefined"!=typeof b.error?alert(b.error):("undefined"!=typeof b.preset_dropdown&&(a("#preset_save").html(b.preset_dropdown),a("#preset_type").val("overwrite").trigger("change")),alert(OP_AB.translate("saved")),a.fancybox.close())},"json")})}function f(){x&&x[1]&&x[2]&&x[3]&&(x[1].height(x[3].outerHeight()),x[2].height(x[1].height()),x[1].css("margin-top","-"+x[1].innerHeight()/2+"px"))}function g(){z.on("click",".element-container a.add-new-element",function(b){var c=a(this),d=parseInt(c.closest(".cols").width(),10)+40;b.preventDefault(),c.parent().parent().hasClass("op-popup")&&(d=parseInt(c.parent().parent().data("width"),10)||700,d+=40,d=d>=a(window).width()?a(window).width()-40:d),f(),x[3].html(""),x[2].css("background","url(images/wpspin_light.gif) no-repeat center center"),x[0].add(x[1]).fadeIn(),x[1].width(d).css("margin-left",-(d/2)+"px"),400>d&&x[1].addClass("epicbox-narrow"),y=c.closest(".element").find("textarea.op-le-child-shortcode"),op_cur_html=x[3],a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-parse",_wpnonce:a("#_wpnonce").val(),shortcode:y.val(),depth:1,page_id:a("#page_id").val()},function(b){"undefined"!=typeof b.output&&("undefined"!=typeof b.font&&""!==b.font&&"google"===b.font[0]&&WebFont.load({google:{families:[b.font[1]+b.font[2].properties]}}),x[2].css("background","none").addClass("op_no_outline").attr("tabindex",0).focus(),x[3].html(b.output+b.js),x[4]=a(".epicbox-actual-content",x[3]),f(),i())},"json")}),x[3].on("click",".op-element-links a.element-delete",function(b){b.preventDefault(),confirm("Are you sure you wish to remove this element?")&&a(this).closest(".row").remove()&&f()}),x[3].on("click","a.add-new-element",function(b){b.preventDefault(),a("#op_asset_browser_container").addClass("hide-elements-with-child-elements"),D=!0;a(this).prev();cur=[a(this),"before"],E=null,OP_AB.open_dialog(),a("#op_assets_filter").val("").trigger("keyup")}),x[3].on("click",".op-element-links a.element-settings",function(b){b.preventDefault();var c=a(this).closest(".row");cur=[c,"replaceWith"],D=!0,p(c,!1)}),x[1].on("click",".close",function(b){b.preventDefault(),a("#op_asset_browser_container").removeClass("hide-elements-with-child-elements"),x[0].add(x[1]).fadeOut()}),a("#op_child_elements_form").submit(function(b){b.preventDefault();var c="",d="",e=!1,f="";a(this).find(".op_popup_element_present").length>0&&(e=!0),f="[op_liveeditor_elements] ",e&&(f="[op_popup_elements]"),a(this).find("textarea.op-le-child-shortcode").each(function(){var b=0===a(this).val().indexOf("[op_popup_button]")?!0:!1;b?d+=a(this).val():e?(c+="[op_popup_content_element]",c+=a(this).val(),c+="[/op_popup_content_element] "):(f+='[op_liveeditor_element data-style="'+(a(this).parent().parent().attr("data-style")||"")+'"]',f+=a(this).val(),f+="[/op_liveeditor_element] ")}),e||(f+="[/op_liveeditor_elements] "),e&&(f+="[op_popup_button]",d=d.split(/\[op_popup_button\](.*)\[\/op_popup_button\]/gi),d=d[1],f+=d,f+="[/op_popup_button]",f+="[op_popup_content]",f+=c,f+="[/op_popup_content]",f+="[/op_popup_elements]"),y.val(f),k(y),D=!1,a(".close",x[1]).trigger("click")})}function h(){G&&"string"!=typeof this.content&&this.content.find(".wp-editor-area").each(function(){var b=a(this).attr("id");"opassetswysiwyg"!=b&&(a("#"+b+"-tmce").trigger("click"),tinyMCE.execCommand("mceFocus",!1,b),tinyMCE.execCommand("mceRemoveControl",!1,b))})}function i(b){var b=b||!1;b?x[4].sortable("refresh").disableSelection():x[4].sortable(a.extend({},F,{handle:".op-element-links .element-move",items:"div.row",update:null})).disableSelection()}function j(b){var c=b.find("textarea.op-le-shortcode"),d=c.text();d||(d=c.val());var e=new RegExp("#OP_CHILD_ELEMENTS#");return b.find("textarea.op-le-child-shortcode").each(function(){d=d.replace(e,a(this).val())}),d}function k(b){b.text("");var c,d=b.closest(".element-container"),e=j(d),f=d.find(".element:first"),g=d.find(".op-waiting");op_cur_html=d,f.fadeOut("fast").html(""),g.fadeIn("fast").end().find(".op-show-waiting").fadeIn("fast"),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-parse",_wpnonce:a("#_wpnonce").val(),shortcode:e,depth:0,page_id:a("#page_id").val()},function(a){if("undefined"!=typeof f&&"undefined"!=typeof a.output){"undefined"!=typeof a.font&&""!==a.font&&"google"===a.font[0]&&WebFont.load({google:{families:[a.font[1]+a.font[2].properties]}}),c=op_cur_html.attr("data-style")?JSON.parse(atob(op_cur_html.attr("data-style"))):{},c.codeBefore=c.codeBefore||"",c.codeAfter=c.codeAfter||"",f.html(c.codeBefore+a.output+a.js+c.codeAfter);var e=d.closest(".editable-area");t(e),"undefined"!=typeof a.shortcode&&b.val(a.shortcode),g.fadeOut("fast",function(){f.fadeIn("fast")}),l(e)}},"json")}function l(b){b.each(function(){var b=a(this),c=b.attr("id"),d="le_"+("footer_area"==c?"footer":"content_area"==c?"body":c)+"_row_",e=1;a(this).find("> .row").each(function(){var b=1;a(this).attr("id",d+e).find("> .cols").each(function(){var c=1;a(this).attr("id",d+e+"_col_"+b).find("> .element-container:not(.sort-disabled)").each(function(){a(this).attr("id",d+e+"_col_"+b+"_el_"+c),c++}),b++}),e++})})}function m(b){var c=[];return b.length>0&&(c=[]),b.find("> .row").each(function(){var b=a(this),d={row_class:b.attr("class"),row_style:b.attr("style"),row_data_style:b.attr("data-style"),children:[]};b.find("> > .cols:not(.sort-diabled)").each(function(){var b=a(this),c={col_class:b.attr("class"),type:"column",children:[]},e={type:"",object:{}};b.find("> div:not(.sort-disabled, .add-element-container)").each(function(){var b={type:"",object:{}};if(a(this).hasClass("element-container"))b.type="element",b.object=j(a(this)),b.element_class=a(this).attr("class"),a(this).hasClass("cf")||a(this).addClass("cf"),b.element_data_style=a(this).attr("data-style"),c.children.push(b);else if(a(this).hasClass("subcol")){var d=a(this),e={subcol_class:a(this).attr("class"),type:"subcolumn",children:[]};d.find("> div:not(.sort-disabled, .add-element-container)").each(function(){var b=a(this),c={type:"",object:{}};c.type="element",c.object=j(b),c.element_class=a(this).attr("class"),c.element_data_style=a(this).attr("data-style"),e.children.push(c)}),c.children.push(e)}}),e.type="column",e.object=c,d.children.push(e)}),c.push(d)}),c}function n(b){var c={action:OptimizePress.SN+"-live-editor-save",status:a("#op-live-editor-status").val(),_wpnonce:a("#_wpnonce").val(),page_id:a("#page_id").val(),op:{},layouts:{}};op_show_loading(),a("div.editable-area").each(function(){var b=a(this).data("layout");c.layouts[b]=m(a(this))}),"undefined"!=typeof OP_Feature_Area&&(c.feature_area=OP_Feature_Area);for(var d=["typography","settings"],e=0,f=d.length;f>e;e++)a.extend(c.op,q(a("#le-"+d[e]+"-dialog")).op||{});a.post(OptimizePress.ajaxurl,c,function(c){op_hide_loading(),"undefined"!=typeof c.error?(alert(c.error),window.op_dont_hide_loading=!1,op_hide_loading()):a.isFunction(b)?(OP.disable_alert||alert(OP_AB.translate("saved")),b()):(OP.disable_alert||alert(OP_AB.translate("saved")),OP.disable_alert=!1,window.op_dont_hide_loading=!1,op_hide_loading())},"json")}function o(c,d){if(d=d||"",d=""==d?"":d+"-","N"==c.data("one_col")){c.append('<div id="'+d+'add-new-row" class="cf"><div class="'+d+'add-new-row-link"><div class="add-new-row-content"><a href="#op-le-row-select" class="add-new-button"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="'+u("add_new_row")+'" /><span>'+u("add_new_row")+"</span></a></div></div></div>");var e=a("a","#"+d+"add-new-row");e.fancybox(a.extend({},A,{type:"inline",href:"#op-le-row-select",beforeLoad:function(){cur=[a("#"+d+"add-new-row"),"before"]}})),c.on("click",".add-new-row",function(b){b.preventDefault(),cur=[a(this).closest(".row"),"before"],a.fancybox.open(a.extend({},A,{type:"inline",href:"#op-le-row-select"}))}),z.on("mouseenter",".cols",function(){a(this).find(".split-column").fadeIn(100)}),z.on("mouseleave",".cols",function(){a(this).find(".split-column").fadeOut(100)}),z.on("click",".split-column",function(b){b.preventDefault();var c=a(this).attr("href");switch(c=c.substring(1),a("#op-le-split-column ul li").each(function(){a(this).hide()}),c){case"one-half":a("#op-le-split-column ul li a.split-half").parent().show();break;case"two-thirds":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show(),a("#op-le-split-column ul li a.one-fourth-first").parent().show(),a("#op-le-split-column ul li a.one-fourth-second").parent().show();break;case"two-fourths":a("#op-le-split-column ul li a.split-half").parent().show();break;case"three-fourths":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show(),a("#op-le-split-column ul li a.one-fourth-first").parent().show(),a("#op-le-split-column ul li a.one-fourth-second").parent().show(),a("#op-le-split-column ul li a.one-fourths").parent().show();break;case"three-fifths":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show();break;case"four-fifths":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show(),a("#op-le-split-column ul li a.one-fourth-first").parent().show(),a("#op-le-split-column ul li a.one-fourth-second").parent().show(),a("#op-le-split-column ul li a.one-fourths").parent().show()}cur=[a(this).closest(".column"),"append"],a.fancybox.open(a.extend({},A,{type:"inline",href:"#op-le-split-column"}))}),z.on("click",".banner",function(b){b.preventDefault(),b.stopPropagation(),a.fancybox.open(a.extend({},A,{type:"inline",href:"#le-headers-dialog"}))}),z.on("click",".edit-row",function(b){if(b.preventDefault(),cur=[a(this).closest(".row"),"before"],cur[0].hasClass("section")?a('input[name="op_full_width_row"]').prop("checked",!0):a('input[name="op_full_width_row"]').prop("checked",!1),cur_style=cur[0].attr("style"),cur_data_style=cur[0].attr("data-style")){a("#op_section_row_options_bgcolor_start").val("").trigger("change"),a("#op_section_row_options_bgcolor_end").val("").trigger("change"),a("#op_row_top_padding").val(""),a("#op_row_before").val(""),a("#op_row_after").val(""),a("#op_row_bottom_padding").val(""),a("#op_row_border_width").val(""),a("#op_section_row_options_borderColor").val("").trigger("change"),OP_AB.set_uploader_value("op_row_background",""),a(".op_row_bg_options option").each(function(){a(this).attr("selected",!1)});var c=JSON.parse(atob(cur_data_style));for(var d in c)switch(d){case"codeBefore":a("#op_row_before").val(c[d]);break;case"codeAfter":a("#op_row_after").val(c[d]);break;case"paddingTop":a("#op_row_top_padding").val(c[d]);break;case"paddingBottom":a("#op_row_bottom_padding").val(c[d]);break;case"backgroundImage":var e=c[d].slice(4,-1);OP_AB.set_uploader_value("op_row_background",e);break;case"backgroundPosition":a('.op_row_bg_options option[value="'+c[d]+'"]').attr("selected","selected");break;case"borderWidth":a("#op_row_border_width").val(c[d]);break;case"borderColor":a("#op_section_row_options_borderColor").val(c[d]).trigger("change");break;case"backgroundColorStart":a("#op_section_row_options_bgcolor_start").val(c[d]).trigger("change");break;case"backgroundColorEnd":a("#op_section_row_options_bgcolor_end").val(c[d]).trigger("change")}}else a("#op_section_row_options_bgcolor_start").val("").trigger("change"),a("#op_section_row_options_bgcolor_end").val("").trigger("change"),a("#op_row_top_padding").val(""),a("#op_row_bottom_padding").val(""),a("#op_row_border_width").val(""),a("#op_row_before").val(""),a("#op_row_after").val(""),a("#op_section_row_options_borderColor").val("").trigger("change"),OP_AB.set_uploader_value("op_row_background",""),a(".op_row_bg_options option").each(function(){a(this).attr("selected",!1)});a.fancybox.open(a.extend({},A,{type:"inline",href:"#op-le-row-options"}))}),a(window).on("focus",function(){b()}),z.on("click",".paste-row",function(b){b.preventDefault();var d=localStorage.getItem("op_row")||"";a(this).closest(".row").before(d),l(c),t(c),a(".paste-row").show()}),z.on("click",".copy-row",function(b){b.preventDefault();var c=a(this).closest(".row"),d=c.clone().attr("id",""),e=0;c.find("textarea.op-le-shortcode").each(function(){var b=a(d.find("textarea.op-le-shortcode")),c=a(this).val();a(b[e]).val(c),a(b[e]).text(c),e++}),d.find(".element-container, .column").each(function(){a(this).attr("id","")});try{localStorage.setItem("op_row",d[0].outerHTML),a(".paste-row").show(),alert("Row succesfully copied")}catch(f){alert("Session Storage not supported or you tried to copy row that is too big")}}),z.on("click",".clone-row",function(){var b=a(this).closest(".row"),d=b.clone().attr("id",""),e=0;b.find("textarea.op-le-shortcode").each(function(){var b=a(d.find("textarea.op-le-shortcode")),c=a(this).val();a(b[e]).val(c),e++}),d.find(".element-container, .column").each(function(){a(this).attr("id","")}),b.after(d),l(c),t(c)}),c.on("click","a.delete-row",function(b){if(b.preventDefault(),confirm("Are you sure you wish to remove this row and all its elements?")){var c=a(this).closest(".row");c.prev(".op-row-code-before").remove(),c.next(".op-row-code-after").remove(),c.remove()}})}l(c),t(c),c.on("click","a.move-row,a.element-move",function(a){a.preventDefault()}),c.on("click",".cols > .add-element-container > a.add-new-element",function(b){b.preventDefault(),D=!1,cur=[a(this).parent().prev(),"before"],E=null,OP_AB.open_dialog(),a("#op_assets_filter").trigger("keyup")}),c.on("click",".op-element-links a.element-delete",function(b){b.preventDefault(),confirm("Are you sure you wish to remove this element?")&&a(this).closest(".element-container").remove()}),c.on("click",".op-element-links a.element-settings",function(b){b.preventDefault();var c=a(this).closest(".element-container"),d=c.find("> .element a.add-new-element");d.length?d.trigger("click"):(cur=[c,"replaceWith"],E=c.find("textarea.op-le-shortcode"),p(E.closest(".element-container")))}),z.on("click",".op-element-links a.element-advanced",function(b){if(b.preventDefault(),cur=[a(this).closest(".element-container")],cur[0].hasClass("hide-mobile")?a('input[name="op_hide_phones"]').prop("checked",!0):a('input[name="op_hide_phones"]').prop("checked",!1),cur[0].hasClass("hide-tablet")?a('input[name="op_hide_tablets"]').prop("checked",!0):a('input[name="op_hide_tablets"]').prop("checked",!1),cur_data_style=cur[0].attr("data-style"),cur_data_style&&"undefined"!==cur_data_style){a("#op_advanced_fadein").val(""),a("#op_advanced_code_before").val(""),a("#op_advanced_code_after").val(""),a("#op_advanced_class").val("");var c=JSON.parse(atob(cur_data_style));for(var d in c)switch(d){case"codeBefore":a("#op_advanced_code_before").val(c[d]);break;case"codeAfter":a("#op_advanced_code_after").val(c[d]);break;case"fadeIn":a("#op_advanced_fadein").val(c[d]);break;case"advancedClass":a("#op_advanced_class").val(c[d])}}else a("#op_advanced_fadein").val(""),a("#op_advanced_code_before").val(""),a("#op_advanced_code_after").val(""),a("#op_advanced_class").val("");a.fancybox.open(a.extend({},A,{type:"inline",href:a(this).attr("href")}))}),z.on("click","#op-le-advanced-update",function(b){{var c={},d="",e="",f="";cur[0].hasClass("hide-mobile"),cur[0].hasClass("hide-tablet")}b.preventDefault(),cur[0].hasClass("row")?cur[0].removeClass().addClass("row element-container cf"):cur[0].removeClass().addClass("element-container cf"),a("#op_advanced_class").val()&&(cur[0].addClass(a("#op_advanced_class").val()),c.advancedClass=a("#op_advanced_class").val()),a('input[name="op_hide_phones"]:checked').length>0?(cur[0].addClass("hide-mobile"),c.hideMobile=1):cur[0].removeClass("hide-mobile"),a('input[name="op_hide_tablets"]:checked').length>0?(cur[0].addClass("hide-tablet"),c.hideTablet=1):cur[0].removeClass("hide-tablet"),a("#op_advanced_fadein").val()&&(c.fadeIn=a("#op_advanced_fadein").val()),a("#op_advanced_code_before").val()&&(d=a("#op_advanced_code_before").val()),a("#op_advanced_code_after").val()&&(e=a("#op_advanced_code_after").val()),cur[0].find(".element, .op-hidden, .op-element-links, .op-waiting").each(function(b,c){var g,h,i,j=a(c);j.hasClass("element")?(h=d+a(j[0].innerHTML)[0].outerHTML+e,f+='<div class="element">'+h+"</div>"):j.hasClass("op-hidden")&&!j.hasClass("op-waiting")?(g=j.find(" > textarea").hasClass("op-le-child-shortcode")?"op-le-child-shortcode":"op-le-shortcode",i=j.find("> textarea").val(),f+='<div class="op-hidden">',f+='<textarea name="shortcode[]" class="'+g+'">',f+=i,f+="</textarea>",f+="</div>"):f+=j[0].outerHTML}),cur[0].html(f),a("#op_advanced_code_before").val()&&(c.codeBefore=a("#op_advanced_code_before").val()),a("#op_advanced_code_after").val()&&(c.codeAfter=a("#op_advanced_code_after").val());var g=btoa(JSON.stringify(c));cur[0].attr("data-style",g),a.fancybox.close()}),c.on("click",".op-element-links a.element-parent-settings",function(b){b.preventDefault();var c=a(this).closest(".element-container");cur=[c,"replaceWith"],E=c.find("textarea.op-le-shortcode"),p(E.closest(".element-container"))}),z.on("click",".op-element-links a.element-clone",function(b){b.preventDefault();var c=a(this).closest(".element-container"),d=c.find("textarea.op-le-shortcode").val(),e=c.clone(!0,!0).attr("id","");e.find("textarea.op-le-shortcode").val(d),c.after(e)})}function p(b,c){c=c===!1?!1:!0;var d=c?j(b):b.find("textarea.op-le-child-shortcode").val();!c&&b.find(".element > p").length>0&&(d="[text_block]"+d+"[/text_block]"),OP_AB.open_dialog(0),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-params",_wpnonce:a("#_wpnonce").val(),shortcode:d},function(b){"undefined"!=typeof b.error?alert(b.error):a(".fancybox-opened").length>0&&OP_AB.edit_element(b)},"json")}function q(b){if(!b.length)return!1;var c={},d=c;return b.find(':input[type!="checkbox"][type!="radio"][type!="submit"], input:checked').each(function(){var b=this.name.replace(/\[([^\]]+)?\]/g,",$1").split(","),e=b.length-1,f=0;if(b[0])for(;e>f;f++)d=d[b[f]]=d[b[f]]||(""==b[f+1]?[]:{});"undefined"!=typeof d.length?d.push(a(this).val()):d[b[e]]=a(this).val(),d=c}),c}function r(b){if(0==cur.length)return alert("Could not find the current position, please try clicking the Split Column link again."),void 0;var c=b.attr("href").split("#")[1],d=[];if(isTextOnButton=[],b.length>0){switch(c){case"split-half":d=["split-half","split-half"],isTextOnButton=[!0,!0];break;case"one-third-second":d=["split-two-thirds","split-one-third"],isTextOnButton=[!0,!1];break;case"one-third-first":d=["split-one-third","split-two-thirds"],isTextOnButton=[!1,!0];break;case"one-thirds":d=["split-one-third","split-one-third","split-one-third"],isTextOnButton=[!1,!1,!1];break;case"one-fourth-second":d=["split-three-fourths","split-one-fourth"],isTextOnButton=[!0,!1];break;case"one-fourth-first":d=["split-one-fourth","split-three-fourths"],isTextOnButton=[!1,!0];break;case"one-fourths":d=["split-one-fourth","split-one-fourth","split-one-fourth","split-one-fourth"],isTextOnButton=[!1,!1,!1,!1]}for(var e="",f=0,g=d.length;g>f;f++){btnText=isTextOnButton[f]?"<span>Add Element</span>":"",e+='<div class="'+d[f]+' column cols subcol"><div class="element-container sort-disabled"></div><div class="add-element-container"><a href="#add_element" class="add-new-element"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="Add New Element" />'+btnText+"</a></div></div>"}btnText="<span>Add element</span>",e+='</div></div><div class="clearcol"></div>',e+='<div class="element-container sort-disabled"></div><div class="add-element-container"><a href="#add_element" class="add-new-element"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="Add New Element" />'+btnText+"</a></div>",e=a(e),cur[0][cur[1]](e),cur[0].on("click",".add-element-container > a.add-new-element",function(b){b.preventDefault(),D=!1,cur=[a(this).parent().prev(),"before"],E=null,OP_AB.open_dialog()});var h=cur[0].closest(".editable-area");t(h),l(h),a.fancybox.close()}else alert("Please select split column type")}function s(b){if(0==cur.length)return alert("Could not find the current position, please try clicking the Add new row link again."),void 0;var c=b.attr("href").split("#")[1],d="",e=[];if(isTextOnButton=[],b.length>0){switch(c){case"one-col":d="one-column",e=["one-column"],isTextOnButton=[!0];break;case"two-col":d="two-columns",e=["one-half","one-half"],isTextOnButton=[!0,!0];break;case"three-col":d="three-columns",e=["one-third","one-third","one-third"],isTextOnButton=[!0,!0,!0];break;case"four-col":d="four-columns",e=["one-fourth","one-fourth","one-fourth","one-fourth"],isTextOnButton=[!1,!1,!1,!1];break;case"five-col":d="five-columns",e=["one-fifth","one-fifth","one-fifth","one-fifth","one-fifth"],isTextOnButton=[!1,!1,!1,!1,!1];break;default:switch(c){case"1":d="three-columns",e=["two-thirds","one-third"],isTextOnButton=[!0,!0];break;case"2":d="three-columns",e=["one-third","two-thirds"],isTextOnButton=[!0,!0];break;case"3":d="four-columns",e=["two-fourths","one-fourth","one-fourth"],isTextOnButton=[!0,!1,!1];break;case"4":d="four-columns",e=["one-fourth","one-fourth","two-fourths"],isTextOnButton=[!1,!1,!0];break;case"5":d="four-columns",e=["three-fourths","one-fourth"],isTextOnButton=[!0,!1];break;case"6":d="four-columns",e=["one-fourth","three-fourths"],isTextOnButton=[!1,!0];break;case"7":d="five-columns",e=["two-fifths","one-fifth","one-fifth","one-fifth"],isTextOnButton=[!0,!1,!1,!1];break;case"8":d="five-columns",e=["one-fifth","one-fifth","one-fifth","two-fifths"],isTextOnButton=[!1,!1,!1,!0];break;case"9":d="five-columns",e=["three-fifths","one-fifth","one-fifth"],isTextOnButton=[!0,!1,!1];break;case"10":d="five-columns",e=["one-fifth","one-fifth","three-fifths"],isTextOnButton=[!1,!1,!0];break;case"11":d="five-columns",e=["four-fifths","one-fifth"],isTextOnButton=[!0,!1];break;case"12":d="five-columns",e=["one-fifth","four-fifths"],isTextOnButton=[!1,!0];break;case"13":d="four-columns",e=["one-fourth","two-fourths","one-fourth"],isTextOnButton=[!1,!0,!1];break;case"14":d="five-columns",e=["two-fifths","three-fifths"],isTextOnButton=[!0,!0];break;case"15":d="five-columns",e=["three-fifths","two-fifths"],isTextOnButton=[!0,!0];break;case"16":d="five-columns",e=["one-fifth","two-fifths","two-fifths"],isTextOnButton=[!1,!0,!0];break;case"17":d="five-columns",e=["two-fifths","two-fifths","one-fifth"],isTextOnButton=[!0,!0,!1];break;case"18":d="five-columns",e=["one-fifth","three-fifths","one-fifth"],isTextOnButton=[!1,!0,!1]}}var f="";if(0===c.indexOf("feature_")){a.fancybox.showLoading();var g={action:OptimizePress.SN+"-live-editor-get-predefined-template",template:c,page_id:a("#page_id").val()};a.ajax({type:"POST",dataType:"json",url:OptimizePress.ajaxurl,data:g}).done(function(b){if("error"!=b.output){f+=b.output,f=a(f),f.find(".cols > .add-element-container > a.add-new-element").click(function(b){b.preventDefault(),D=!1,cur=[a(this).parent().prev(),"before"],E=null,OP_AB.open_dialog()}),cur[0][cur[1]](f);var c=cur[0].closest(".editable-area");t(c),l(c),a.fancybox.hideLoading(),a.fancybox.close()}})}else{f+='<div class="row '+d+' cf"><div class="fixed-width"><div class="op-row-links"><div class="op-row-links-content"><a id="copy_row" href="#copy-row" class="copy-row"></a><a id="row_options" href="#options" class="edit-row"></a><a id="row_options" href="#clone-row" class="clone-row"></a><a href="#add-new-row" class="add-new-row"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="'+u("add_new_row")+'" /><span>'+u("add_new_row")+'</span></a><a href="#move" class="move-row"></a><a href="#paste-row" class="paste-row"></a><a href="#delete-row" class="delete-row"></a></div></div>';for(var h,i=0,j=e.length;j>i;i++){btnText=isTextOnButton[i]?"<span>Add Element</span>":"";var k="";switch(e[i]){case"one-third":case"one-fourth":case"one-fifth":case"two-fifths":k=" narrow";break;default:k=""}switch(e[i]){case"one-half":case"two-thirds":case"two-fourths":case"three-fourths":case"three-fifths":case"four-fifths":h='<a href="#'+e[i]+'" class="split-column"><img src="'+OptimizePress.imgurl+'/live_editor/split_column.png" alt="Split Column" /></a>';break;default:h=""}f+='<div class="'+e[i]+" column cols"+k+'"><div class="element-container sort-disabled"></div><div class="add-element-container">'+h+'<a href="#add_element" class="add-new-element"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="Add New Element" />'+btnText+"</a></div></div>"
}f+="</div></div>",f=a(f),f.find(".cols > .add-element-container > a.add-new-element").click(function(b){b.preventDefault(),D=!1,cur=[a(this).parent().prev(),"before"],E=null,OP_AB.open_dialog()}),cur[0][cur[1]](f);var m=cur[0].closest(".editable-area");t(m),l(m),localStorage.getItem("op_row")||a(".paste-row").hide(),a.fancybox.close()}}else alert("Please select a column type")}function t(b){b.sortable(a.extend({},F,{handle:".op-row-links .move-row",items:"> div.row",update:function(){l(b)}})).disableSelection(),b.find("div.row:not(.element-container)").sortable(a.extend({},F,{handle:".op-element-links .element-move",items:"div.element-container:not(.row)",connectWith:".row",update:function(){l(b)}}))}function u(a){return OP_AB.translate(a)}var w,x,y,z,A={},B=a(window),C=window.dialogArguments||opener||parent||top,D=!1,E=null,F={revert:"invalid",scrollSensitivity:"50",tolerance:"pointer"},G=!1,H=[],I=[];OP=OP||{},OP.disable_alert=!1,a(document).ready(function(){function i(){p=!0,OP.disable_alert=!0,window.op_dont_show_loading=!0,n()}function j(b,c,d,e){b.empty(),"category"==d?(b.append(a("<option>").text("").val("")),a.each(H,function(d){var e=H[d];e.parent==="parent-"+c&&(""!=e.selected?b.append(a("<option>").text(e.text).val(e.value).attr("selected",!0)):b.append(a("<option>").text(e.text).val(e.value)))})):(b.append(a("<option>").text("").val("")),a.each(I,function(d){var e=I[d];e.parent==="parent-"+c&&(""!=e.selected?b.append(a("<option>").text(e.text).val(e.value).attr("selected",!0)):b.append(a("<option>").text(e.text).val(e.value)))})),"undefined"==typeof e&&b.val(""),"#op_category_id"==b.selector&&a("#op_category_id").trigger("change"),"#op_category_id1"==b.selector&&a("#op_category_id1").trigger("change",e)}function k(b){var c=a(this).attr("href").split("#")[1],d=a("#"+c);b.preventDefault(),c&&"op-revisions-dialog"===c?OP._initPageRevisions(A):a.fancybox(a.extend({},A,{minWidth:d.width(),href:"#"+c}))}function m(){window.location.reload()}z=a("body"),c(),a("#changeMembershipType").click(function(){a("#pageTypeChange").attr("disabled",!1).attr("name","op[type]").css("border-color","#66AFE9").css("box-shadow","0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px rgba(102, 175, 233, 0.6)")}),a("#pageTypeChange").change(function(){a("#le-membership-dialog .editor-button").trigger("click")}),a("#op_header_disable_link").change(function(){a(this).is(":checked")?a("#op_header_link").hide():a("#op_header_link").show()}).trigger("change"),a("#op_category_id").find("option").each(function(){var b;b=a(this).attr("selected")?a(this).val():"",H.push({value:a(this).val(),text:a(this).text(),parent:a(this).attr("class"),selected:b})}),a("#op_subcategory_id").find("option").each(function(){var b;b=a(this).attr("selected")?a(this).val():"",I.push({value:a(this).val(),text:a(this).text(),parent:a(this).attr("class"),selected:b})}),"undefined"!=typeof switchEditors&&(G=!0);var p=!1;p||setInterval(i,1e3*OptimizePress.op_autosave_interval),a("#op_product_id").change(function(b,c){j(a("#op_category_id"),a(this).val(),"category",c)}).trigger("change",["first"]),a("#op_category_id").change(function(b,c){j(a("#op_subcategory_id"),a(this).val(),"subcategory",c)}).trigger("change",["second"]);var q=a("#preset-option-preset,#preset-option-content_layout");a("#preset-option :radio").change(function(){q.hide(),a(this).is(":checked")&&(v=a(this).val())&&"blank"!=v&&a("#preset-option-"+v).show()}).filter(":checked").trigger("change"),x=[a("#epicbox-overlay"),a("#epicbox")],x.push(a(".epicbox-content",x[1])),x.push(a(".epicbox-scroll",x[2])),x[0].css({opacity:.8}),B.bind("beforeunload",function(a){if(OP.disable_alert===!1){var b="If you leave page, all unsaved changes will be lost.";return"undefined"==typeof a&&(a=window.event),a&&(a.returnValue=b),b}}).resize(function(){w=a(".fancybox-inner").scrollTop(),f()}),A={padding:0,autoSize:!0,wrapCSS:"fancybox-no-scroll",helpers:{overlay:{closeClick:!1}},keys:!1,beforeClose:h,afterClose:function(){w=null,E=null,OP._pageRevisionsActive&&(OP._pageRevisionsActive=!1,a(document).off("pageRevisionsFancyboxOpen"),a(window).off("resize",OP._repositionRevisionsPopup)),a("html").css({overflow:"auto",height:"auto"}),a(window.parent.document).find(".fancybox-close").css({display:"block"})},beforeShow:function(){a("html").css({overflow:"hidden",height:"100%"}),a(window.parent.document).find(".fancybox-close").css({display:"none"})},afterShow:function(){var b,c;G&&"string"!=typeof this.content&&this.content.find(".wp-editor-area").each(function(){var b=a(this).attr("id");a(this).val(OP_AB.autop(a(this).val())),tinyMCE.execCommand("mceAddControl",!0,b)}),a("select.op-type-switcher").trigger("change"),b=a(".fancybox-opened").eq(-1),c=b.find("iframe"),c.length>0?c.focus():b.find(".fancybox-inner").addClass("op_no_outline").attr("tabindex",0).focus(),OP._pageRevisionsActive&&a(document).trigger("pageRevisionsFancyboxOpen"),window.op_dont_show_loading=!1},onCancel:function(){cur=[]},onUpdate:function(){null!=w&&a(".fancybox-inner").scrollTop(w)}},z.on("click","#op-le-row-options-update",function(b){b.preventDefault();var c={};if(a('input[name="op_full_width_row"]:checked').length>0?cur[0].addClass("section"):cur[0].removeClass("section"),a("#op_row_bg_options").val()&&a("#op_row_background").val()){var d=a("#op_row_bg_options").val(),e="url("+a("#op_row_background").val()+")";switch(c.backgroundImage=e,c.backgroundPosition=d,d){case"center":cur[0].css({"background-image":e,"background-repeat":"no-repeat","background-position":"center"});break;case"cover":cur[0].css({"background-image":e,"background-size":"cover","background-repeat":"no-repeat"});break;case"tile_horizontal":cur[0].css({"background-image":e,"background-repeat":"repeat-x"});break;case"tile":cur[0].css({"background-repeat":"repeat","background-image":e})}}else cur[0].css({"background-image":"none","background-repeat":"no-repeat"});var f="",g="";if(a("#op_row_before").val()&&(f='<span class="op-row-code-before">'+a("#op_row_before").val()+"</span>"),a("#op_row_after").val()&&(g='<span class="op-row-code-after">'+a("#op_row_after").val()+"</span>"),cur[0].prev(".op-row-code-before").remove(),cur[0].next(".op-row-code-after").remove(),cur[0].before(f),cur[0].after(g),a("#op_row_before").val()&&(c.codeBefore=a("#op_row_before").val()),a("#op_row_after").val()&&(c.codeAfter=a("#op_row_after").val()),a("#op_section_row_options_bgcolor_start").val())if(c.backgroundColorStart=a("#op_section_row_options_bgcolor_start").val(),a("#op_section_row_options_bgcolor_end").val()){var h=a("#op_section_row_options_bgcolor_start").val(),i=a("#op_section_row_options_bgcolor_end").val();c.backgroundColorEnd=a("#op_section_row_options_bgcolor_end").val(),cur[0].css("background",h).css("background","-webkit-gradient(linear, left top, left bottom, color-stop(0%, "+h+"), color-stop(100%, "+i+"))").css("background","-webkit-linear-gradient(top, "+h+" 0%, "+i+" 100%)").css("background","-moz-linear-gradient(top, "+h+" 0%, "+i+" 100%)").css("background","-ms-linear-gradient(top, "+h+" 0%, "+i+" 100%)").css("background","-o-linear-gradient(top, "+h+" 0%, "+i+" 100%)").css("background","linear-gradient(to bottom, "+h+" 0%, "+i+" 100%)").css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr="+h+", endColorstr="+i+", GradientType=0 )")}else cur[0].css("background-color",a("#op_section_row_options_bgcolor_start").val());else cur[0].css("background-color","");a("#op_row_top_padding").val()?(cur[0].css("padding-top",a("#op_row_top_padding").val()+"px"),c.paddingTop=a("#op_row_top_padding").val()):cur[0].css("padding-top",""),a("#op_row_bottom_padding").val()?(cur[0].css("padding-bottom",a("#op_row_bottom_padding").val()+"px"),c.paddingBottom=a("#op_row_bottom_padding").val()):cur[0].css("padding-bottom",""),a("#op_row_border_width").val()?(cur[0].css("border-top-width",a("#op_row_border_width").val()+"px"),cur[0].css("border-bottom-width",a("#op_row_border_width").val()+"px"),c.borderWidth=a("#op_row_border_width").val()):(cur[0].css("border-top-width","0px"),cur[0].css("border-bottom-width","0px")),a("#op_section_row_options_borderColor").val()?(cur[0].css("border-top-color",a("#op_section_row_options_borderColor").val()),cur[0].css("border-bottom-color",a("#op_section_row_options_borderColor").val()),cur[0].css("border-style","solid"),c.borderColor=a("#op_section_row_options_borderColor").val()):(cur[0].css("border-top-color",""),cur[0].css("border-bottom-color",""));var j=btoa(JSON.stringify(c));cur[0].attr("data-style",j),a.fancybox.close()}),a(".editable-area").each(function(){var b=a(this),c=b.attr("id");o(b,c.substr(0,c.length-5)),l(b)}),g(),z.on("click","#op-le-row-select li a",function(b){a("#op-le-row-select li.selected").removeClass("selected"),a(this).parent().addClass("selected"),b.preventDefault()}),z.on("click","#op-le-row-select-insert",function(b){b.preventDefault(),s(a("#op-le-row-select li.selected").find("a:first"))}),z.on("dblclick","#op-le-row-select li a",function(b){b.preventDefault(),s(a(this))}),z.on("click","#op-le-split-column li a",function(b){a("#op-le-split-column li.selected").removeClass("selected"),a(this).parent().addClass("selected"),b.preventDefault()}),z.on("click","#op-le-split-column-insert",function(b){b.preventDefault(),r(a("#op-le-split-column li.selected").find("a:first"))}),a("a.add-new-element").each(function(){a(this).width()<120&&a(this).find("span").hide()}),z.on("dblclick","#op-le-split-column li a",function(b){b.preventDefault(),r(a(this))}),z.on("click","a.feature-settings",function(b){b.preventDefault(),b.stopPropagation();var c=a(this);cur=[c.closest(".op-feature-area"),"replaceWith"],a.fancybox.open(a.extend({},A,{type:"inline",href:c.attr("href")}))}),z.on("click","#op-le-settings-toolbar div.links a",k),a("form.op-feature-area").submit(function(b){var c;b.preventDefault(),a(this).find(".wp-editor-area").each(function(){var b=a(this).attr("id"),c=OP_AB.wysiwyg_content(b);a(this).val(c)}),c=a(this).find("#op_feature_area_settings_optin_formhtml").val(),c=c.replace(/<textarea((.|[\r|\n])*)?<\/\s?textarea>/gi,""),c=c.replace(/<textarea(.*?)>/gi,""),c=c.replace(/<style((.|[\r|\n])*)?<\/\s?style>/gi,""),c=c.replace(/<style(.*?)>/gi,""),a(this).find("#op_feature_area_settings_optin_formhtml").val(c),a.post(OptimizePress.ajaxurl,a(this).serialize(),function(b){"undefined"!=typeof b.error?alert(b.error):(cur[0][cur[1]](b.output),OP_Feature_Area[b.option]=b.js_options,a.fancybox.close())},"json")}),z.on("click","#op-le-close-editor",function(a){a.preventDefault(),OP.disable_alert=!0,C.OP.disable_alert=!0,C.opjq.fancybox.close()}),z.on("click","#op-le-save-1",function(a){a.preventDefault(),n()}),z.on("click","#op-le-save-2",function(a){a.preventDefault(),OP.disable_alert=!0,C.OP.disable_alert=!0,n(C.opjq.fancybox.close)}),a("#le-settings-dialog").submit(function(b){b.preventDefault(),a.fancybox.close(),n()}),a("#le-typography-dialog").submit(function(b){b.preventDefault(),a.fancybox.close(),OP.disable_alert=!0,window.op_dont_hide_loading=!0,op_show_loading(),n(m)}),z.on("click",".op-feature-area:not(:has(.editable-area))",function(b){a(this).find("a.feature-settings").trigger("click"),"undefined"!=typeof a(this).attr("data-unload")&&"0"==a(this).attr("data-unload")&&b.preventDefault()}),z.on("click",".fancybox-inner a",function(){w=a(".fancybox-inner").scrollTop(),a.fancybox.update()}),d(),e(),op_launch_funnel_enabled===!0&&"function"==typeof C.op_launch_suite_update_selects&&C.op_launch_suite_update_selects(a("#page_id").val()),a("[data-fade]").each(function(){var b=a(this).attr("style");b=b||"",b=b.replace(/display:\s?none;?/gi,""),a(this).attr("style",b)}),b()}),window.op_live_editor=!0,window.op_le_column_width=function(){return a(cur[0]).closest(".cols").width()},window.op_refresh_content_layouts=function(){a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-load-layouts",_wpnonce:a("#_wpnonce").val()},function(b){"undefined"!=typeof b.error?alert(b.error):"undefined"!=typeof b.content_layout&&(a("#le-layouts-dialog div.tab-predefined").html(b.content_layout),a('#le-layouts-dialog ul.op-bsw-grey-panel-tabs a[href$="#predefined"]').trigger("click"))},"json")},window.op_le_insert_content=function(b){if(element=b.substr(1,b.indexOf(" ")-1),0==cur.length)return alert("Could not find the current position, please try clicking the Add new row link again."),void 0;var c=b;if(null!==E&&D===!1){if(E.val(c),k(E),"content_toggle"===element||"order_box"===element||"delayed_content"===element||"feature_box"===element||"feature_box_creator"===element||"terms_conditions"===element||"op_popup"===element){var d=E.val();d=d.replace(/\[op_liveeditor_elements\].*\[\/op_liveeditor_elements\]/gi,"#OP_CHILD_ELEMENTS#"),E.val(d)}return a.fancybox.close()}var e="",g="",h="";D?(h=cur[0].hasClass("hide-tablet")?" hide-tablet":"",h+=cur[0].hasClass("hide-mobile")?" hide-mobile":"",e=a('<div class="row element-container cf '+h+'" data-style="'+(cur[0].attr("data-style")||"")+'" />'),g="op-le-child-shortcode"):(e=a('<div class="element-container cf" />'),g="op-le-shortcode");var j=cur[0].closest(".editable-area");cur[0][cur[1]](e),"content_toggle"===element||"order_box"===element||"delayed_content"===element||"feature_box"===element||"feature_box_creator"===element||"terms_conditions"===element||"op_popup"===element?e.append('<div class="op-element-links"><a class="element-parent-settings" href="#parent-settings"><img alt="'+u("edit_parent_element")+'" title="'+u("edit_parent_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#settings" class="element-settings"><img alt="'+u("edit_element")+'" title="'+u("edit_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a class="element-clone" href="#clone-element"><img alt="'+u("clone_element")+'" title="'+u("clone_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#op-le-advanced" class="element-advanced"><img alt="'+u("edit_element")+'" title="'+u("advanced_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#move" class="element-move"><img src="'+OptimizePress.imgurl+'move-icon.png" alt="'+u("move")+'" /></a><a href="#delete" class="element-delete"><img src="'+OptimizePress.imgurl+'remove-row.png" alt="'+u("delete")+'" /></a></div><div class="op-waiting"><img src="images/wpspin_light.gif" alt="" class="op-bsw-waiting op-show-waiting" /></div><div class="element cf"></div><div class="op-hidden"><textarea name="shortcode[]" class="'+g+'"></textarea></div>'):e.append('<div class="op-element-links"><a href="#settings" class="element-settings"><img alt="'+u("edit_element")+'" title="'+u("edit_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a class="element-clone" href="#clone-element"><img alt="'+u("clone_element")+'" title="'+u("clone_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#op-le-advanced" class="element-advanced"><img alt="'+u("edit_element")+'" title="'+u("advanced_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#move" class="element-move"><img src="'+OptimizePress.imgurl+'move-icon.png" alt="'+u("move")+'" /></a><a href="#delete" class="element-delete"><img src="'+OptimizePress.imgurl+'remove-row.png" alt="'+u("delete")+'" /></a></div><div class="op-waiting"><img src="images/wpspin_light.gif" alt="" class="op-bsw-waiting op-show-waiting" /></div><div class="element cf"></div><div class="op-hidden"><textarea name="shortcode[]" class="'+g+'"></textarea></div>');var m=e.find("textarea").val(c);a.fancybox.close(),op_cur_html=e,e.find(".op-waiting").fadeIn("fast").end().find(".op-waiting .op-show-waiting").fadeIn("fast"),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-parse",_wpnonce:a("#_wpnonce").val(),shortcode:c,depth:D?1:0,page_id:a("#page_id").val()},function(b){if(null!==b.check){var c=!0;for(var d in b.check)if(a(d).length>0&&""!=b.check[d])return e.fadeOut("fast",function(){a(this).remove()}),alert(b.check[d]),void 0;if(c===!0){"undefined"!=typeof b.font&&""!==b.font&&"google"===b.font[0]&&WebFont.load({google:{families:[b.font[1]+b.font[2].properties]}}),elDataStyle=e.attr("data-style")&&"undefined"!==e.attr("data-style")?JSON.parse(atob(e.attr("data-style"))):{},elDataStyle.codeBefore=elDataStyle.codeBefore||"",elDataStyle.codeAfter=elDataStyle.codeAfter||"",elDataStyle.advancedClass=elDataStyle.advancedClass||"";var g=e.addClass(elDataStyle.advancedClass).find(".element").html(elDataStyle.codeBefore+b.output+b.js+elDataStyle.codeAfter);D?i(!0):t(j)}}else{"undefined"!=typeof b.font&&""!==b.font&&"google"===b.font[0]&&WebFont.load({google:{families:[b.font[1]+b.font[2].properties]}}),elDataStyle=e.attr("data-style")&&"undefined"!==e.attr("data-style")?JSON.parse(atob(e.attr("data-style"))):{},elDataStyle.codeBefore=elDataStyle.codeBefore||"",elDataStyle.codeAfter=elDataStyle.codeAfter||"",elDataStyle.advancedClass=elDataStyle.advancedClass||"";var g=e.addClass(elDataStyle.advancedClass).find(".element").html(elDataStyle.codeBefore+b.output+b.js+elDataStyle.codeAfter);D?i(!0):t(j)}"undefined"!=typeof g&&("undefined"!=typeof b.shortcode&&m.val(b.shortcode),e.find(".op-waiting").fadeOut("fast",function(){g.fadeIn("fast",function(){f()})}),l(cur[0].closest(".editable-area")))},"json")},window.op_dont_show_loading?window.op_hide_loading():window.op_dont_show_loading=!1,a(document).ready(function(){var a=opjq,b=(a("#op-le-settings-toolbar"),a("#op-le-toggle-sidebar-btn")),c=function(){return a("html").toggleClass("op-le-settings-toolbar--hidden"),!1};b.parent().on("click",c)}),a(window).load(function(){op_hide_loading()})}(opjq);